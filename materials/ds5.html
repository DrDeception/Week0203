<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Dr.&nbsp;Gordon Wright">

<title>PS51020A â€“ Descriptive Statistics 5</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://hypothes.is/embed.js"></script>
<script>
  window.document.addEventListener("DOMContentLoaded", function (_event) {
    document.body.classList.add('hypothesis-enabled');
  });
</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">PS51020A</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link active" href="../index.html" aria-current="page"> 
<span class="menu-text">General Info</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../materials/home_week03.html">Week03</a></li><li class="breadcrumb-item"><a href="../materials/ds5.html">Choosing the right chart</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Content</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Index</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Week02</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../materials/home_week02.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 2 Content</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../materials/scalequestions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Scale Questions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../materials/choicequestions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Choice Questions</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../materials/freetextquestions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Free Text</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Week03</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../materials/home_week03.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 3 Content</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../materials/ds1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Types of Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../materials/ds2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Measures of Central Tendency &amp; Variability</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../materials/ds3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Hand Calculations</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../materials/ds5.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Choosing the right chart</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#data-visualization-cheat-sheet" id="toc-data-visualization-cheat-sheet" class="nav-link active" data-scroll-target="#data-visualization-cheat-sheet"><strong>Data Visualization Cheat Sheet</strong></a>
  <ul class="collapse">
  <li><a href="#central-tendency-mean-median-mode" id="toc-central-tendency-mean-median-mode" class="nav-link" data-scroll-target="#central-tendency-mean-median-mode"><strong>1. Central Tendency (Mean, Median, Mode)</strong></a></li>
  <li><a href="#measurement-types-and-appropriate-charts" id="toc-measurement-types-and-appropriate-charts" class="nav-link" data-scroll-target="#measurement-types-and-appropriate-charts"><strong>2. Measurement Types and Appropriate Charts</strong></a></li>
  <li><a href="#exploring-relationships-between-variables" id="toc-exploring-relationships-between-variables" class="nav-link" data-scroll-target="#exploring-relationships-between-variables"><strong>3. Exploring Relationships Between Variables</strong></a></li>
  <li><a href="#trends-over-time" id="toc-trends-over-time" class="nav-link" data-scroll-target="#trends-over-time"><strong>4. Trends Over Time</strong></a></li>
  <li><a href="#comparing-distributions" id="toc-comparing-distributions" class="nav-link" data-scroll-target="#comparing-distributions"><strong>5. Comparing Distributions</strong></a></li>
  <li><a href="#correlation-and-regression" id="toc-correlation-and-regression" class="nav-link" data-scroll-target="#correlation-and-regression"><strong>6. Correlation and Regression</strong></a></li>
  <li><a href="#self-assessment-questions" id="toc-self-assessment-questions" class="nav-link" data-scroll-target="#self-assessment-questions"><strong>Self-Assessment Questions</strong></a></li>
  <li><a href="#histogram" id="toc-histogram" class="nav-link" data-scroll-target="#histogram">Histogram</a>
  <ul class="collapse">
  <li><a href="#definition" id="toc-definition" class="nav-link" data-scroll-target="#definition">Definition</a></li>
  <li><a href="#what-for" id="toc-what-for" class="nav-link" data-scroll-target="#what-for">What for</a></li>
  <li><a href="#examples" id="toc-examples" class="nav-link" data-scroll-target="#examples">Examples</a></li>
  <li><a href="#useful-for" id="toc-useful-for" class="nav-link" data-scroll-target="#useful-for">Useful for:</a></li>
  <li><a href="#example" id="toc-example" class="nav-link" data-scroll-target="#example">Example</a></li>
  <li><a href="#variation" id="toc-variation" class="nav-link" data-scroll-target="#variation">Variation</a></li>
  <li><a href="#common-mistakes" id="toc-common-mistakes" class="nav-link" data-scroll-target="#common-mistakes">Common mistakes</a></li>
  </ul></li>
  <li><a href="#density-plot" id="toc-density-plot" class="nav-link" data-scroll-target="#density-plot">Density Plot</a>
  <ul class="collapse">
  <li><a href="#definition-1" id="toc-definition-1" class="nav-link" data-scroll-target="#definition-1">Definition</a></li>
  <li><a href="#what-for-1" id="toc-what-for-1" class="nav-link" data-scroll-target="#what-for-1">What for</a></li>
  <li><a href="#examples-1" id="toc-examples-1" class="nav-link" data-scroll-target="#examples-1">Examples</a></li>
  <li><a href="#useful-for-1" id="toc-useful-for-1" class="nav-link" data-scroll-target="#useful-for-1">Useful for:</a></li>
  <li><a href="#example-1" id="toc-example-1" class="nav-link" data-scroll-target="#example-1">Example</a></li>
  <li><a href="#variation-1" id="toc-variation-1" class="nav-link" data-scroll-target="#variation-1">Variation</a></li>
  <li><a href="#common-mistakes-1" id="toc-common-mistakes-1" class="nav-link" data-scroll-target="#common-mistakes-1">Common mistakes</a></li>
  </ul></li>
  <li><a href="#scatter-plot" id="toc-scatter-plot" class="nav-link" data-scroll-target="#scatter-plot">Scatter Plot</a>
  <ul class="collapse">
  <li><a href="#definition-2" id="toc-definition-2" class="nav-link" data-scroll-target="#definition-2">Definition</a></li>
  <li><a href="#what-for-2" id="toc-what-for-2" class="nav-link" data-scroll-target="#what-for-2">What for</a></li>
  <li><a href="#examples-2" id="toc-examples-2" class="nav-link" data-scroll-target="#examples-2">Examples</a></li>
  <li><a href="#useful-for-2" id="toc-useful-for-2" class="nav-link" data-scroll-target="#useful-for-2">Useful for:</a></li>
  <li><a href="#variation-2" id="toc-variation-2" class="nav-link" data-scroll-target="#variation-2">Variation</a></li>
  <li><a href="#common-mistakes-2" id="toc-common-mistakes-2" class="nav-link" data-scroll-target="#common-mistakes-2">Common mistakes</a></li>
  </ul></li>
  <li><a href="#histogram-1" id="toc-histogram-1" class="nav-link" data-scroll-target="#histogram-1">Histogram</a>
  <ul class="collapse">
  <li><a href="#definition-3" id="toc-definition-3" class="nav-link" data-scroll-target="#definition-3">Definition</a></li>
  <li><a href="#what-for-3" id="toc-what-for-3" class="nav-link" data-scroll-target="#what-for-3">What for</a></li>
  <li><a href="#examples-3" id="toc-examples-3" class="nav-link" data-scroll-target="#examples-3">Examples</a></li>
  <li><a href="#useful-for-3" id="toc-useful-for-3" class="nav-link" data-scroll-target="#useful-for-3">Useful for:</a></li>
  <li><a href="#variation-3" id="toc-variation-3" class="nav-link" data-scroll-target="#variation-3">Variation</a></li>
  <li><a href="#common-mistakes-3" id="toc-common-mistakes-3" class="nav-link" data-scroll-target="#common-mistakes-3">Common mistakes</a></li>
  </ul></li>
  <li><a href="#line-chart" id="toc-line-chart" class="nav-link" data-scroll-target="#line-chart">Line Chart</a>
  <ul class="collapse">
  <li><a href="#definition-4" id="toc-definition-4" class="nav-link" data-scroll-target="#definition-4">Definition</a></li>
  <li><a href="#what-for-4" id="toc-what-for-4" class="nav-link" data-scroll-target="#what-for-4">What for</a></li>
  <li><a href="#useful-for-4" id="toc-useful-for-4" class="nav-link" data-scroll-target="#useful-for-4">Useful for:</a></li>
  <li><a href="#variation-4" id="toc-variation-4" class="nav-link" data-scroll-target="#variation-4">Variation</a></li>
  <li><a href="#common-caveats" id="toc-common-caveats" class="nav-link" data-scroll-target="#common-caveats">Common caveats</a></li>
  </ul></li>
  <li><a href="#line-chart-1" id="toc-line-chart-1" class="nav-link" data-scroll-target="#line-chart-1">Line Chart</a>
  <ul class="collapse">
  <li><a href="#common-caveats-1" id="toc-common-caveats-1" class="nav-link" data-scroll-target="#common-caveats-1">Common caveats</a></li>
  </ul></li>
  <li><a href="#word-cloud" id="toc-word-cloud" class="nav-link" data-scroll-target="#word-cloud">Word Cloud</a>
  <ul class="collapse">
  <li><a href="#definition-5" id="toc-definition-5" class="nav-link" data-scroll-target="#definition-5">Definition</a></li>
  <li><a href="#what-for-5" id="toc-what-for-5" class="nav-link" data-scroll-target="#what-for-5">What for</a></li>
  <li><a href="#useful-for-5" id="toc-useful-for-5" class="nav-link" data-scroll-target="#useful-for-5">Useful for:</a></li>
  <li><a href="#example-2" id="toc-example-2" class="nav-link" data-scroll-target="#example-2">Example</a></li>
  <li><a href="#variation-5" id="toc-variation-5" class="nav-link" data-scroll-target="#variation-5">Variation</a></li>
  <li><a href="#common-mistakes-4" id="toc-common-mistakes-4" class="nav-link" data-scroll-target="#common-mistakes-4">Common mistakes</a></li>
  </ul></li>
  <li><a href="#psychology-data-from-year-1" id="toc-psychology-data-from-year-1" class="nav-link" data-scroll-target="#psychology-data-from-year-1">Psychology Data from Year 1</a></li>
  </ul></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="ds5.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../materials/home_week03.html">Week03</a></li><li class="breadcrumb-item"><a href="../materials/ds5.html">Choosing the right chart</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Descriptive Statistics 5</h1>
<p class="subtitle lead">DataVizCheatSheet</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Dr.&nbsp;Gordon Wright </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="data-visualization-cheat-sheet" class="level1">
<h1><strong>Data Visualization Cheat Sheet</strong></h1>
<section id="central-tendency-mean-median-mode" class="level2">
<h2 class="anchored" data-anchor-id="central-tendency-mean-median-mode"><strong>1. Central Tendency (Mean, Median, Mode)</strong></h2>
<p>When exploring central tendency, you can use the following charts based on the data type:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Data Type</strong></th>
<th><strong>Chart Type</strong></th>
<th><strong>Best for</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Nominal</strong></td>
<td>Bar Chart</td>
<td>Mode</td>
<td>Displays the frequency of categories.</td>
</tr>
<tr class="even">
<td><strong>Ordinal</strong></td>
<td>Bar Chart</td>
<td>Median, Mode</td>
<td>Bars ordered by the rank of categories.</td>
</tr>
<tr class="odd">
<td><strong>Interval</strong></td>
<td>Histogram</td>
<td>Mean, Median, Mode</td>
<td>Shows frequency distribution of values.</td>
</tr>
<tr class="even">
<td><strong>Interval/Ratio</strong></td>
<td>Box Plot (Box-and-Whisker)</td>
<td>Median, Range, Outliers</td>
<td>Displays median, quartiles, and outliers.</td>
</tr>
<tr class="odd">
<td><strong>Ratio</strong></td>
<td>Histogram or Box Plot</td>
<td>Mean, Median, Mode</td>
<td>Shows frequency distribution or central range.</td>
</tr>
</tbody>
</table>
</section>
<section id="measurement-types-and-appropriate-charts" class="level2">
<h2 class="anchored" data-anchor-id="measurement-types-and-appropriate-charts"><strong>2. Measurement Types and Appropriate Charts</strong></h2>
<p>To visually represent different data types, the following charts are most commonly used:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Data Type</strong></th>
<th><strong>Chart Type</strong></th>
<th><strong>Best for</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Nominal</strong></td>
<td>Pie Chart, Bar Chart</td>
<td>Categories, Frequencies</td>
<td>Compares parts to the whole (pie) or shows counts (bar).</td>
</tr>
<tr class="even">
<td><strong>Ordinal</strong></td>
<td>Ordered Bar Chart, Dot Plot</td>
<td>Ranked Categories</td>
<td>Ordered bars or dots that reflect the ordinal nature of data.</td>
</tr>
<tr class="odd">
<td><strong>Interval</strong></td>
<td>Histogram, Line Chart</td>
<td>Continuous Data (e.g., temperature)</td>
<td>Line chart shows changes over time; histogram shows distribution.</td>
</tr>
<tr class="even">
<td><strong>Ratio</strong></td>
<td>Scatter Plot, Histogram, Box Plot</td>
<td>Continuous Data with True Zero</td>
<td>Used for numerical data with meaningful zero.</td>
</tr>
</tbody>
</table>
</section>
<section id="exploring-relationships-between-variables" class="level2">
<h2 class="anchored" data-anchor-id="exploring-relationships-between-variables"><strong>3. Exploring Relationships Between Variables</strong></h2>
<p>The following charts are commonly used to explore relationships between two or more variables:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Type of Data</strong></th>
<th><strong>Chart Type</strong></th>
<th><strong>Best for</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Nominal vs Nominal</strong></td>
<td>Stacked Bar Chart, Grouped Bar Chart</td>
<td>Comparing two categories</td>
<td>Shows distribution of one nominal variable across levels of another.</td>
</tr>
<tr class="even">
<td><strong>Ordinal vs Ordinal</strong></td>
<td>Ordered Bar Chart, Stacked Bar Chart</td>
<td>Comparing two ranked categories</td>
<td>Displays trends in ordered categories.</td>
</tr>
<tr class="odd">
<td><strong>Nominal/Ordinal vs Interval/Ratio</strong></td>
<td>Box Plot, Violin Plot</td>
<td>Comparing groups for continuous variables</td>
<td>Box plots show central tendency and spread; violin plots show distribution.</td>
</tr>
<tr class="even">
<td><strong>Interval vs Interval</strong></td>
<td>Scatter Plot, Line Chart</td>
<td>Correlation or relationship between two continuous variables</td>
<td>Scatter plots show correlation or pattern; line charts show trend over time.</td>
</tr>
<tr class="odd">
<td><strong>Ratio vs Ratio</strong></td>
<td>Scatter Plot, Bubble Chart</td>
<td>Strength and direction of relationships</td>
<td>Scatter plots can show strength, direction, and outliers; bubble charts add size as a variable.</td>
</tr>
</tbody>
</table>
</section>
<section id="trends-over-time" class="level2">
<h2 class="anchored" data-anchor-id="trends-over-time"><strong>4. Trends Over Time</strong></h2>
<p>If you are looking at trends over time for different data types, consider the following:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Data Type</strong></th>
<th><strong>Chart Type</strong></th>
<th><strong>Best for</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Interval/Ratio</strong></td>
<td>Line Chart</td>
<td>Continuous time-based data</td>
<td>Tracks changes over time (e.g., temperature, stock prices).</td>
</tr>
<tr class="even">
<td><strong>Nominal</strong></td>
<td>Stacked Line Chart, Stacked Bar Chart</td>
<td>Time-based categories</td>
<td>Shows changes in category proportions over time.</td>
</tr>
</tbody>
</table>
</section>
<section id="comparing-distributions" class="level2">
<h2 class="anchored" data-anchor-id="comparing-distributions"><strong>5. Comparing Distributions</strong></h2>
<p>When comparing the distribution of data between groups or categories, the following charts are useful:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Data Type</strong></th>
<th><strong>Chart Type</strong></th>
<th><strong>Best for</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Interval/Ratio</strong></td>
<td>Histogram, Box Plot</td>
<td>Distribution of continuous data across groups</td>
<td>Histograms show frequency; box plots show median and spread.</td>
</tr>
<tr class="even">
<td><strong>Nominal/Ordinal</strong></td>
<td>Bar Chart, Pie Chart</td>
<td>Comparing category proportions</td>
<td>Bar and pie charts compare categoriesâ€™ proportions.</td>
</tr>
</tbody>
</table>
</section>
<section id="correlation-and-regression" class="level2">
<h2 class="anchored" data-anchor-id="correlation-and-regression"><strong>6. Correlation and Regression</strong></h2>
<p>To explore the correlation between two continuous variables or to visualize a regression model:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Type of Data</strong></th>
<th><strong>Chart Type</strong></th>
<th><strong>Best for</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Interval/Ratio</strong></td>
<td>Scatter Plot with Regression Line</td>
<td>Correlation or regression analysis</td>
<td>Scatter plots visualize relationships; a regression line adds a trend.</td>
</tr>
<tr class="even">
<td><strong>Nominal/Ordinal vs Interval/Ratio</strong></td>
<td>Faceted Scatter Plot, Box Plot</td>
<td>Comparing groups with continuous variables</td>
<td>Shows how groups differ based on continuous measures.</td>
</tr>
</tbody>
</table>
</section>
<section id="self-assessment-questions" class="level2">
<h2 class="anchored" data-anchor-id="self-assessment-questions"><strong>Self-Assessment Questions</strong></h2>
<ol type="1">
<li><strong>What type of chart would you use to display the frequency of different job titles (e.g., teacher, engineer, doctor)?</strong>
<ul>
<li>ANSWER HERE</li>
</ul></li>
<li><strong>How would you visualize the relationship between a personâ€™s age and their income?</strong>
<ul>
<li>ANSWER HERE</li>
</ul></li>
<li><strong>If you were comparing the median salary of employees across different education levels (e.g., high school, bachelorâ€™s, masterâ€™s), which chart type would you use?</strong>
<ul>
<li>ANSWER HERE</li>
</ul></li>
<li><strong>Which chart would best show the distribution of exam scores in a class?</strong>
<ul>
<li>ANSWER HERE</li>
</ul></li>
<li><strong>What chart would you use to see how sales numbers have changed over the last 10 years?</strong>
<ul>
<li>ANSWER HERE</li>
</ul></li>
</ol>
<p>This â€˜cheatâ€™ sheet should help you decide on the most appropriate charts for exploring central tendency, different measurement types, and relationships in their data. It also includes self-assessment questions to ensure you get a good grip of these concepts.</p>
</section>
<section id="histogram" class="level2">
<h2 class="anchored" data-anchor-id="histogram">Histogram</h2>
<section id="definition" class="level3">
<h3 class="anchored" data-anchor-id="definition">Definition</h3>
<p>A histogram is an accurate graphical representation of the distribution of a numeric variable. It takes as input numeric variables only. The variable is cut into several bins, and the number of observation per bin is represented by the height of the bar.</p>
<p>Here is an example showing the distribution of the night price of Rbnb apartments in the south of France. Price range is divided per 10 euros interval. For example, there are slightly less than 750 appartements with a night price between 100 and 110 euros:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># Libraries</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-3"><a href="#cb1-3"></a></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="co"># Load dataset from github using base R</span></span>
<span id="cb1-5"><a href="#cb1-5"></a>data <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">"https://raw.githubusercontent.com/holtzy/data_to_viz/master/Example_dataset/1_OneNum.csv"</span>, <span class="at">header=</span><span class="cn">TRUE</span>)</span>
<span id="cb1-6"><a href="#cb1-6"></a></span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="co"># Ensure the data is in a proper data frame and filter</span></span>
<span id="cb1-8"><a href="#cb1-8"></a>filtered_data <span class="ot">&lt;-</span> <span class="fu">subset</span>(data, price <span class="sc">&lt;</span> <span class="dv">300</span>)</span>
<span id="cb1-9"><a href="#cb1-9"></a></span>
<span id="cb1-10"><a href="#cb1-10"></a><span class="co"># Create the histogram using ggplot2</span></span>
<span id="cb1-11"><a href="#cb1-11"></a><span class="fu">ggplot</span>(filtered_data, <span class="fu">aes</span>(<span class="at">x =</span> price)) <span class="sc">+</span></span>
<span id="cb1-12"><a href="#cb1-12"></a>  <span class="fu">geom_histogram</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">300</span>, <span class="dv">10</span>), <span class="at">fill =</span> <span class="st">"#69b3a2"</span>, <span class="at">color =</span> <span class="st">"#e9ecef"</span>, <span class="at">alpha =</span> <span class="fl">0.9</span>) <span class="sc">+</span></span>
<span id="cb1-13"><a href="#cb1-13"></a>  <span class="fu">ggtitle</span>(<span class="st">"Night price distribution of Airbnb apartments"</span>) <span class="sc">+</span></span>
<span id="cb1-14"><a href="#cb1-14"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ds5_files/figure-html/unnamed-chunk-1-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="what-for" class="level3">
<h3 class="anchored" data-anchor-id="what-for">What for</h3>
<p>Histograms are used to study the distribution of one or a few variables. Checking the distribution of your variables one by one is probably the first task you should do when you get a new dataset. It delivers a good quantity of information. Several distribution shapes exist, here is an illustration of the 6 most common ones:</p>
</section>
<section id="examples" class="level3">
<h3 class="anchored" data-anchor-id="examples">Examples</h3>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="co"># Libraries</span></span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb2-3"><a href="#cb2-3"></a></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="co"># Build dataset with different distributions</span></span>
<span id="cb2-5"><a href="#cb2-5"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb2-6"><a href="#cb2-6"></a>  <span class="at">type =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">"edge peak"</span>, <span class="dv">1000</span>), <span class="fu">rep</span>(<span class="st">"comb"</span>, <span class="dv">1000</span>), <span class="fu">rep</span>(<span class="st">"normal"</span>, <span class="dv">1000</span>), <span class="fu">rep</span>(<span class="st">"uniform"</span>, <span class="dv">1000</span>), <span class="fu">rep</span>(<span class="st">"bimodal"</span>, <span class="dv">1000</span>), <span class="fu">rep</span>(<span class="st">"skewed"</span>, <span class="dv">1000</span>)),</span>
<span id="cb2-7"><a href="#cb2-7"></a>  <span class="at">value =</span> <span class="fu">c</span>(</span>
<span id="cb2-8"><a href="#cb2-8"></a>    <span class="fu">rnorm</span>(<span class="dv">900</span>), <span class="fu">rep</span>(<span class="dv">3</span>, <span class="dv">100</span>),                            <span class="co"># edge peak</span></span>
<span id="cb2-9"><a href="#cb2-9"></a>    <span class="fu">rnorm</span>(<span class="dv">360</span>, <span class="at">sd =</span> <span class="fl">0.5</span>), <span class="fu">rep</span>(<span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="sc">-</span><span class="fl">0.75</span>, <span class="sc">-</span><span class="fl">0.5</span>, <span class="sc">-</span><span class="fl">0.25</span>, <span class="dv">0</span>, <span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>), <span class="dv">80</span>),  <span class="co"># comb</span></span>
<span id="cb2-10"><a href="#cb2-10"></a>    <span class="fu">rnorm</span>(<span class="dv">1000</span>),                                         <span class="co"># normal</span></span>
<span id="cb2-11"><a href="#cb2-11"></a>    <span class="fu">runif</span>(<span class="dv">1000</span>),                                         <span class="co"># uniform</span></span>
<span id="cb2-12"><a href="#cb2-12"></a>    <span class="fu">rnorm</span>(<span class="dv">500</span>, <span class="at">mean =</span> <span class="sc">-</span><span class="dv">2</span>), <span class="fu">rnorm</span>(<span class="dv">500</span>, <span class="at">mean =</span> <span class="dv">2</span>),         <span class="co"># bimodal</span></span>
<span id="cb2-13"><a href="#cb2-13"></a>    <span class="fu">abs</span>(<span class="fu">log</span>(<span class="fu">rnorm</span>(<span class="dv">1000</span>)))                                <span class="co"># skewed</span></span>
<span id="cb2-14"><a href="#cb2-14"></a>  )</span>
<span id="cb2-15"><a href="#cb2-15"></a>)</span>
<span id="cb2-16"><a href="#cb2-16"></a></span>
<span id="cb2-17"><a href="#cb2-17"></a><span class="co"># Represent it</span></span>
<span id="cb2-18"><a href="#cb2-18"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x =</span> value)) <span class="sc">+</span></span>
<span id="cb2-19"><a href="#cb2-19"></a>  <span class="fu">geom_histogram</span>(<span class="at">fill =</span> <span class="st">"#69b3a2"</span>, <span class="at">color =</span> <span class="st">"#e9ecef"</span>, <span class="at">alpha =</span> <span class="fl">0.9</span>) <span class="sc">+</span></span>
<span id="cb2-20"><a href="#cb2-20"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> type, <span class="at">scales =</span> <span class="st">"free_x"</span>) <span class="sc">+</span></span>
<span id="cb2-21"><a href="#cb2-21"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span>  <span class="co"># Replace hrbrthemes::theme_ipsum() with theme_minimal() from ggplot2</span></span>
<span id="cb2-22"><a href="#cb2-22"></a>  <span class="fu">theme</span>(</span>
<span id="cb2-23"><a href="#cb2-23"></a>    <span class="at">panel.spacing =</span> <span class="fu">unit</span>(<span class="fl">0.1</span>, <span class="st">"lines"</span>),</span>
<span id="cb2-24"><a href="#cb2-24"></a>    <span class="at">axis.title.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb2-25"><a href="#cb2-25"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb2-26"><a href="#cb2-26"></a>    <span class="at">axis.ticks.x =</span> <span class="fu">element_blank</span>()</span>
<span id="cb2-27"><a href="#cb2-27"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ds5_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="useful-for" class="level3">
<h3 class="anchored" data-anchor-id="useful-for">Useful for:</h3>
<p>Checking this distribution also helps you discovering mistakes in the data. For example, the <code>comb</code> distribution can often denote a rounding that has been applied to the variable or another mistake.</p>
<p>As a second step, histogram allow to compare the distribution of <strong>a few</strong> variables. Donâ€™t compare more than 3 or 4, it would make the figure cluttered and unreadable. This comparison can be done showing the 2 variables on the same graphic and using transparency.</p>
</section>
<section id="example" class="level3">
<h3 class="anchored" data-anchor-id="example">Example</h3>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="co"># Libraries</span></span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb3-3"><a href="#cb3-3"></a></span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="co"># Build dataset with different distributions</span></span>
<span id="cb3-5"><a href="#cb3-5"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb3-6"><a href="#cb3-6"></a>  <span class="at">type =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">"variable 1"</span>, <span class="dv">1000</span>), <span class="fu">rep</span>(<span class="st">"variable 2"</span>, <span class="dv">1000</span>)),</span>
<span id="cb3-7"><a href="#cb3-7"></a>  <span class="at">value =</span> <span class="fu">c</span>(<span class="fu">rnorm</span>(<span class="dv">1000</span>), <span class="fu">rnorm</span>(<span class="dv">1000</span>, <span class="at">mean =</span> <span class="dv">4</span>))</span>
<span id="cb3-8"><a href="#cb3-8"></a>)</span>
<span id="cb3-9"><a href="#cb3-9"></a></span>
<span id="cb3-10"><a href="#cb3-10"></a><span class="co"># Represent it</span></span>
<span id="cb3-11"><a href="#cb3-11"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x =</span> value, <span class="at">fill =</span> type)) <span class="sc">+</span></span>
<span id="cb3-12"><a href="#cb3-12"></a>  <span class="fu">geom_histogram</span>(<span class="at">color =</span> <span class="st">"#e9ecef"</span>, <span class="at">alpha =</span> <span class="fl">0.6</span>, <span class="at">position =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb3-13"><a href="#cb3-13"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#69b3a2"</span>, <span class="st">"#404080"</span>)) <span class="sc">+</span></span>
<span id="cb3-14"><a href="#cb3-14"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span>  <span class="co"># Replace hrbrthemes::theme_ipsum() with theme_minimal()</span></span>
<span id="cb3-15"><a href="#cb3-15"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ds5_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="variation" class="level3">
<h3 class="anchored" data-anchor-id="variation">Variation</h3>
<p>A common variation of the histogram is the mirror histogram: it puts face to face 2 histograms to compare their distribution.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="co"># Libraries</span></span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb4-3"><a href="#cb4-3"></a></span>
<span id="cb4-4"><a href="#cb4-4"></a><span class="co"># Build dataset</span></span>
<span id="cb4-5"><a href="#cb4-5"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb4-6"><a href="#cb4-6"></a>  <span class="at">x =</span> <span class="fu">rnorm</span>(<span class="dv">1000</span>),</span>
<span id="cb4-7"><a href="#cb4-7"></a>  <span class="at">y =</span> <span class="fu">rnorm</span>(<span class="dv">1000</span>, <span class="at">mean =</span> <span class="dv">2</span>)</span>
<span id="cb4-8"><a href="#cb4-8"></a>)</span>
<span id="cb4-9"><a href="#cb4-9"></a></span>
<span id="cb4-10"><a href="#cb4-10"></a><span class="co"># Represent it</span></span>
<span id="cb4-11"><a href="#cb4-11"></a><span class="fu">ggplot</span>(data) <span class="sc">+</span></span>
<span id="cb4-12"><a href="#cb4-12"></a>  <span class="co"># First histogram for variable 'x'</span></span>
<span id="cb4-13"><a href="#cb4-13"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> ..density..), <span class="at">binwidth =</span> <span class="fu">diff</span>(<span class="fu">range</span>(data<span class="sc">$</span>x)) <span class="sc">/</span> <span class="dv">30</span>, <span class="at">fill =</span> <span class="st">"#69b3a2"</span>) <span class="sc">+</span></span>
<span id="cb4-14"><a href="#cb4-14"></a>  <span class="fu">geom_label</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fl">4.8</span>, <span class="at">y =</span> <span class="fl">0.25</span>, <span class="at">label =</span> <span class="st">"variable1"</span>), <span class="at">color =</span> <span class="st">"#69b3a2"</span>) <span class="sc">+</span></span>
<span id="cb4-15"><a href="#cb4-15"></a>  </span>
<span id="cb4-16"><a href="#cb4-16"></a>  <span class="co"># Second histogram for variable 'y' (flipped vertically)</span></span>
<span id="cb4-17"><a href="#cb4-17"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x =</span> y, <span class="at">y =</span> <span class="sc">-</span>..density..), <span class="at">binwidth =</span> <span class="fu">diff</span>(<span class="fu">range</span>(data<span class="sc">$</span>x)) <span class="sc">/</span> <span class="dv">30</span>, <span class="at">fill =</span> <span class="st">"#404080"</span>) <span class="sc">+</span></span>
<span id="cb4-18"><a href="#cb4-18"></a>  <span class="fu">geom_label</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fl">4.8</span>, <span class="at">y =</span> <span class="sc">-</span><span class="fl">0.25</span>, <span class="at">label =</span> <span class="st">"variable2"</span>), <span class="at">color =</span> <span class="st">"#404080"</span>) <span class="sc">+</span></span>
<span id="cb4-19"><a href="#cb4-19"></a>  </span>
<span id="cb4-20"><a href="#cb4-20"></a>  <span class="co"># Replace hrbrthemes::theme_ipsum() with theme_minimal()</span></span>
<span id="cb4-21"><a href="#cb4-21"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb4-22"><a href="#cb4-22"></a>  </span>
<span id="cb4-23"><a href="#cb4-23"></a>  <span class="co"># Label the x-axis</span></span>
<span id="cb4-24"><a href="#cb4-24"></a>  <span class="fu">xlab</span>(<span class="st">"value of x"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ds5_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="common-mistakes" class="level3">
<h3 class="anchored" data-anchor-id="common-mistakes">Common mistakes</h3>
<ul>
<li>Try several bin sizes, it can lead to very different conclusions.</li>
<li>Donâ€™t use weird color sheme. It does not give any more insight.</li>
<li>Donâ€™t confound it with a barplot. A barplot gives a value for each group of a categoric variable. Here, we have only a numeric variable and we chack its distribution.</li>
<li>Donâ€™t compare more than ~3 groups in the same histogram. The graphic gets cluttered and hardly understandable. Instead use a violin plot, a boxplot, a ridgeline plot or use small multiple.</li>
<li>Using unequal bin widths</li>
</ul>
</section>
</section>
<section id="density-plot" class="level2">
<h2 class="anchored" data-anchor-id="density-plot">Density Plot</h2>
<section id="definition-1" class="level3">
<h3 class="anchored" data-anchor-id="definition-1">Definition</h3>
<p>A density plot is a representation of the distribution of a numeric variable. It uses a kernel density estimate to show the probability density function of the variable. It is a smoothed version of the histogram and is used in the same concept.</p>
<p>Here is an example showing the distribution of the night price of Rbnb appartements in the south of France:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="co"># Libraries</span></span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb5-3"><a href="#cb5-3"></a></span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="co"># Load dataset from github</span></span>
<span id="cb5-5"><a href="#cb5-5"></a>data <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">"https://raw.githubusercontent.com/holtzy/data_to_viz/master/Example_dataset/1_OneNum.csv"</span>, <span class="at">header=</span><span class="cn">TRUE</span>)</span>
<span id="cb5-6"><a href="#cb5-6"></a></span>
<span id="cb5-7"><a href="#cb5-7"></a><span class="co"># Make the density plot</span></span>
<span id="cb5-8"><a href="#cb5-8"></a>filtered_data <span class="ot">&lt;-</span> <span class="fu">subset</span>(data, price <span class="sc">&lt;</span> <span class="dv">300</span>)</span>
<span id="cb5-9"><a href="#cb5-9"></a></span>
<span id="cb5-10"><a href="#cb5-10"></a><span class="fu">ggplot</span>(filtered_data, <span class="fu">aes</span>(<span class="at">x =</span> price)) <span class="sc">+</span></span>
<span id="cb5-11"><a href="#cb5-11"></a>  <span class="fu">geom_density</span>(<span class="at">fill =</span> <span class="st">"#69b3a2"</span>, <span class="at">color =</span> <span class="st">"#e9ecef"</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb5-12"><a href="#cb5-12"></a>  <span class="fu">ggtitle</span>(<span class="st">"Night price distribution of Airbnb apartments"</span>) <span class="sc">+</span></span>
<span id="cb5-13"><a href="#cb5-13"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ds5_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="what-for-1" class="level3">
<h3 class="anchored" data-anchor-id="what-for-1">What for</h3>
<p>Density plots are used to study the distribution of one or a few variables. Checking the distribution of your variables one by one is probably the first task you should do when you get a new dataset. It delivers a good quantity of information. Several distribution shapes exist, here is an illustration of the 6 most common ones:</p>
</section>
<section id="examples-1" class="level3">
<h3 class="anchored" data-anchor-id="examples-1">Examples</h3>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="co"># Libraries</span></span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb6-3"><a href="#cb6-3"></a></span>
<span id="cb6-4"><a href="#cb6-4"></a><span class="co"># Build dataset with different distributions</span></span>
<span id="cb6-5"><a href="#cb6-5"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb6-6"><a href="#cb6-6"></a>  <span class="at">type =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">"edge peak"</span>, <span class="dv">1000</span>), <span class="fu">rep</span>(<span class="st">"comb"</span>, <span class="dv">1000</span>), <span class="fu">rep</span>(<span class="st">"normal"</span>, <span class="dv">1000</span>), <span class="fu">rep</span>(<span class="st">"uniform"</span>, <span class="dv">1000</span>), <span class="fu">rep</span>(<span class="st">"bimodal"</span>, <span class="dv">1000</span>), <span class="fu">rep</span>(<span class="st">"skewed"</span>, <span class="dv">1000</span>)),</span>
<span id="cb6-7"><a href="#cb6-7"></a>  <span class="at">value =</span> <span class="fu">c</span>(</span>
<span id="cb6-8"><a href="#cb6-8"></a>    <span class="fu">rnorm</span>(<span class="dv">900</span>), <span class="fu">rep</span>(<span class="dv">3</span>, <span class="dv">100</span>),                            <span class="co"># edge peak</span></span>
<span id="cb6-9"><a href="#cb6-9"></a>    <span class="fu">rnorm</span>(<span class="dv">360</span>, <span class="at">sd =</span> <span class="fl">0.5</span>), <span class="fu">rep</span>(<span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="sc">-</span><span class="fl">0.75</span>, <span class="sc">-</span><span class="fl">0.5</span>, <span class="sc">-</span><span class="fl">0.25</span>, <span class="dv">0</span>, <span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>), <span class="dv">80</span>),  <span class="co"># comb</span></span>
<span id="cb6-10"><a href="#cb6-10"></a>    <span class="fu">rnorm</span>(<span class="dv">1000</span>),                                         <span class="co"># normal</span></span>
<span id="cb6-11"><a href="#cb6-11"></a>    <span class="fu">runif</span>(<span class="dv">1000</span>),                                         <span class="co"># uniform</span></span>
<span id="cb6-12"><a href="#cb6-12"></a>    <span class="fu">rnorm</span>(<span class="dv">500</span>, <span class="at">mean =</span> <span class="sc">-</span><span class="dv">2</span>), <span class="fu">rnorm</span>(<span class="dv">500</span>, <span class="at">mean =</span> <span class="dv">2</span>),         <span class="co"># bimodal</span></span>
<span id="cb6-13"><a href="#cb6-13"></a>    <span class="fu">abs</span>(<span class="fu">log</span>(<span class="fu">rnorm</span>(<span class="dv">1000</span>)))                                <span class="co"># skewed</span></span>
<span id="cb6-14"><a href="#cb6-14"></a>  )</span>
<span id="cb6-15"><a href="#cb6-15"></a>)</span>
<span id="cb6-16"><a href="#cb6-16"></a></span>
<span id="cb6-17"><a href="#cb6-17"></a><span class="co"># Represent it</span></span>
<span id="cb6-18"><a href="#cb6-18"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x =</span> value)) <span class="sc">+</span></span>
<span id="cb6-19"><a href="#cb6-19"></a>  <span class="fu">geom_density</span>(<span class="at">fill =</span> <span class="st">"#69b3a2"</span>, <span class="at">color =</span> <span class="st">"#e9ecef"</span>, <span class="at">alpha =</span> <span class="fl">0.9</span>, <span class="at">adjust =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb6-20"><a href="#cb6-20"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>type, <span class="at">scales =</span> <span class="st">"free"</span>) <span class="sc">+</span>  <span class="co"># Corrected 'scale' to 'scales'</span></span>
<span id="cb6-21"><a href="#cb6-21"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span>  <span class="co"># Replace hrbrthemes::theme_ipsum() with theme_minimal()</span></span>
<span id="cb6-22"><a href="#cb6-22"></a>  <span class="fu">theme</span>(</span>
<span id="cb6-23"><a href="#cb6-23"></a>    <span class="at">panel.spacing =</span> <span class="fu">unit</span>(<span class="fl">0.1</span>, <span class="st">"lines"</span>),</span>
<span id="cb6-24"><a href="#cb6-24"></a>    <span class="at">axis.title.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb6-25"><a href="#cb6-25"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb6-26"><a href="#cb6-26"></a>    <span class="at">axis.ticks.x =</span> <span class="fu">element_blank</span>()</span>
<span id="cb6-27"><a href="#cb6-27"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ds5_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="useful-for-1" class="level3">
<h3 class="anchored" data-anchor-id="useful-for-1">Useful for:</h3>
<p>Checking this distribution also helps you discovering mistakes in the data. For example, the <code>comb</code> distribution can often denote a rounding that has been applied to the variable or another mistake.</p>
<p>As a second step, density plots allow to compare the distribution of <strong>a few</strong> variables. Donâ€™t compare more than 3 or 4, it would make the figure cluttered and unreadable. This comparison can be done showing the 2 variables on the same graphic and using transparency.</p>
</section>
<section id="example-1" class="level3">
<h3 class="anchored" data-anchor-id="example-1">Example</h3>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="co"># Libraries</span></span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb7-3"><a href="#cb7-3"></a></span>
<span id="cb7-4"><a href="#cb7-4"></a><span class="co"># Build dataset with different distributions</span></span>
<span id="cb7-5"><a href="#cb7-5"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb7-6"><a href="#cb7-6"></a>  <span class="at">type =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">"variable 1"</span>, <span class="dv">1000</span>), <span class="fu">rep</span>(<span class="st">"variable 2"</span>, <span class="dv">1000</span>)),</span>
<span id="cb7-7"><a href="#cb7-7"></a>  <span class="at">value =</span> <span class="fu">c</span>(<span class="fu">rnorm</span>(<span class="dv">1000</span>), <span class="fu">rnorm</span>(<span class="dv">1000</span>, <span class="at">mean =</span> <span class="dv">4</span>))</span>
<span id="cb7-8"><a href="#cb7-8"></a>)</span>
<span id="cb7-9"><a href="#cb7-9"></a></span>
<span id="cb7-10"><a href="#cb7-10"></a><span class="co"># Represent it</span></span>
<span id="cb7-11"><a href="#cb7-11"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x =</span> value, <span class="at">fill =</span> type)) <span class="sc">+</span></span>
<span id="cb7-12"><a href="#cb7-12"></a>  <span class="fu">geom_density</span>(<span class="at">color =</span> <span class="st">"#e9ecef"</span>, <span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb7-13"><a href="#cb7-13"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#69b3a2"</span>, <span class="st">"#404080"</span>)) <span class="sc">+</span></span>
<span id="cb7-14"><a href="#cb7-14"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span>  <span class="co"># Replacing hrbrthemes::theme_ipsum() with theme_minimal()</span></span>
<span id="cb7-15"><a href="#cb7-15"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ds5_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="variation-1" class="level3">
<h3 class="anchored" data-anchor-id="variation-1">Variation</h3>
<p>A common variation of the density plot is the mirror density plot: it puts face to face 2 density plots to compare their distribution.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a><span class="co"># Libraries</span></span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb8-3"><a href="#cb8-3"></a></span>
<span id="cb8-4"><a href="#cb8-4"></a><span class="co"># Build dataset</span></span>
<span id="cb8-5"><a href="#cb8-5"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb8-6"><a href="#cb8-6"></a>  <span class="at">x =</span> <span class="fu">rnorm</span>(<span class="dv">1000</span>), </span>
<span id="cb8-7"><a href="#cb8-7"></a>  <span class="at">y =</span> <span class="fu">rnorm</span>(<span class="dv">1000</span>, <span class="at">mean =</span> <span class="dv">2</span>)</span>
<span id="cb8-8"><a href="#cb8-8"></a>)</span>
<span id="cb8-9"><a href="#cb8-9"></a></span>
<span id="cb8-10"><a href="#cb8-10"></a><span class="co"># Represent it</span></span>
<span id="cb8-11"><a href="#cb8-11"></a><span class="fu">ggplot</span>(data) <span class="sc">+</span> </span>
<span id="cb8-12"><a href="#cb8-12"></a>  <span class="co"># First density for variable 'x'</span></span>
<span id="cb8-13"><a href="#cb8-13"></a>  <span class="fu">geom_density</span>(<span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> ..density..), <span class="at">fill =</span> <span class="st">"#69b3a2"</span>) <span class="sc">+</span> </span>
<span id="cb8-14"><a href="#cb8-14"></a>  <span class="fu">geom_label</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fl">4.5</span>, <span class="at">y =</span> <span class="fl">0.25</span>, <span class="at">label =</span> <span class="st">"variable1"</span>), <span class="at">color =</span> <span class="st">"#69b3a2"</span>) <span class="sc">+</span></span>
<span id="cb8-15"><a href="#cb8-15"></a>  </span>
<span id="cb8-16"><a href="#cb8-16"></a>  <span class="co"># Second density for variable 'y' (flipped vertically)</span></span>
<span id="cb8-17"><a href="#cb8-17"></a>  <span class="fu">geom_density</span>(<span class="fu">aes</span>(<span class="at">x =</span> y, <span class="at">y =</span> <span class="sc">-</span>..density..), <span class="at">fill =</span> <span class="st">"#404080"</span>) <span class="sc">+</span></span>
<span id="cb8-18"><a href="#cb8-18"></a>  <span class="fu">geom_label</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fl">4.5</span>, <span class="at">y =</span> <span class="sc">-</span><span class="fl">0.25</span>, <span class="at">label =</span> <span class="st">"variable2"</span>), <span class="at">color =</span> <span class="st">"#404080"</span>) <span class="sc">+</span></span>
<span id="cb8-19"><a href="#cb8-19"></a>  </span>
<span id="cb8-20"><a href="#cb8-20"></a>  <span class="co"># Replace hrbrthemes::theme_ipsum() with theme_minimal()</span></span>
<span id="cb8-21"><a href="#cb8-21"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb8-22"><a href="#cb8-22"></a>  </span>
<span id="cb8-23"><a href="#cb8-23"></a>  <span class="co"># Label for the x-axis</span></span>
<span id="cb8-24"><a href="#cb8-24"></a>  <span class="fu">xlab</span>(<span class="st">"value of x"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ds5_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="common-mistakes-1" class="level3">
<h3 class="anchored" data-anchor-id="common-mistakes-1">Common mistakes</h3>
<ul>
<li>Play with the bandwidth argument, it can lead to very different conclusions.</li>
<li>Donâ€™t compare more than ~3 groups on the same density plot. The graphic gets cluttered and hardly understandable. Instead use a violin plot, a boxplot, a ridgeline plot or use small multiple.</li>
</ul>
</section>
</section>
<section id="scatter-plot" class="level2">
<h2 class="anchored" data-anchor-id="scatter-plot">Scatter Plot</h2>
<section id="definition-2" class="level3">
<h3 class="anchored" data-anchor-id="definition-2">Definition</h3>
<p>A scatterplot displays the relationship between 2 numeric variables. For each data point, the value of its first variable is represented on the X axis, the second on the Y axis.</p>
<p>Here is an example considering the price of 1460 apartments and their ground living area. This dataset comes from a Kaggle machine learning competition.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="co"># Libraries</span></span>
<span id="cb9-2"><a href="#cb9-2"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb9-4"><a href="#cb9-4"></a></span>
<span id="cb9-5"><a href="#cb9-5"></a><span class="co"># Load dataset from github using base R</span></span>
<span id="cb9-6"><a href="#cb9-6"></a>data <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">"https://raw.githubusercontent.com/holtzy/data_to_viz/master/Example_dataset/2_TwoNum.csv"</span>, </span>
<span id="cb9-7"><a href="#cb9-7"></a>                   <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">sep =</span> <span class="st">","</span>)[, <span class="fu">c</span>(<span class="st">"GrLivArea"</span>, <span class="st">"SalePrice"</span>)]</span>
<span id="cb9-8"><a href="#cb9-8"></a></span>
<span id="cb9-9"><a href="#cb9-9"></a><span class="co"># Plot</span></span>
<span id="cb9-10"><a href="#cb9-10"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x =</span> GrLivArea, <span class="at">y =</span> SalePrice <span class="sc">/</span> <span class="dv">1000</span>)) <span class="sc">+</span></span>
<span id="cb9-11"><a href="#cb9-11"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"#69b3a2"</span>, <span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb9-12"><a href="#cb9-12"></a>  <span class="fu">ggtitle</span>(<span class="st">"Ground living area partially explains sale price of apartments"</span>) <span class="sc">+</span></span>
<span id="cb9-13"><a href="#cb9-13"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span>  <span class="co"># Replaced hrbrthemes::theme_ipsum() with theme_minimal()</span></span>
<span id="cb9-14"><a href="#cb9-14"></a>  <span class="fu">theme</span>(</span>
<span id="cb9-15"><a href="#cb9-15"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>)</span>
<span id="cb9-16"><a href="#cb9-16"></a>  ) <span class="sc">+</span></span>
<span id="cb9-17"><a href="#cb9-17"></a>  <span class="fu">ylab</span>(<span class="st">'Sale price (k$)'</span>) <span class="sc">+</span></span>
<span id="cb9-18"><a href="#cb9-18"></a>  <span class="fu">xlab</span>(<span class="st">'Ground living area'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ds5_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="768"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="what-for-2" class="level3">
<h3 class="anchored" data-anchor-id="what-for-2">What for</h3>
<p>A scatterplot is made to study the relationship between 2 variables. Thus it is often accompanied by a correlation coefficient calculation, that usually tries to measure the linear relationship.</p>
<p>However other types of relationship can be detected using scatterplots, and a common task consists to fit a model explaining Y in function of X. Here are a few patterns you can detect doing a scatterplot.</p>
</section>
<section id="examples-2" class="level3">
<h3 class="anchored" data-anchor-id="examples-2">Examples</h3>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a><span class="co"># Libraries</span></span>
<span id="cb10-2"><a href="#cb10-2"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb10-3"><a href="#cb10-3"></a></span>
<span id="cb10-4"><a href="#cb10-4"></a><span class="co"># Create data</span></span>
<span id="cb10-5"><a href="#cb10-5"></a>d1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x =</span> <span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">100</span>), <span class="at">y =</span> <span class="fu">rnorm</span>(<span class="dv">100</span>), <span class="at">name =</span> <span class="st">"No trend"</span>)</span>
<span id="cb10-6"><a href="#cb10-6"></a>d2 <span class="ot">&lt;-</span> <span class="fu">transform</span>(d1, <span class="at">y =</span> x <span class="sc">*</span> <span class="dv">10</span> <span class="sc">+</span> <span class="fu">rnorm</span>(<span class="dv">100</span>, <span class="at">sd =</span> <span class="dv">60</span>), <span class="at">name =</span> <span class="st">"Linear relationship"</span>)</span>
<span id="cb10-7"><a href="#cb10-7"></a>d3 <span class="ot">&lt;-</span> <span class="fu">transform</span>(d1, <span class="at">y =</span> x<span class="sc">^</span><span class="dv">2</span> <span class="sc">+</span> <span class="fu">rnorm</span>(<span class="dv">100</span>, <span class="at">sd =</span> <span class="dv">140</span>), <span class="at">name =</span> <span class="st">"Square"</span>)</span>
<span id="cb10-8"><a href="#cb10-8"></a>d4 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x =</span> <span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">10</span>, <span class="fl">0.1</span>), <span class="at">y =</span> <span class="fu">sin</span>(<span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">10</span>, <span class="fl">0.1</span>)) <span class="sc">+</span> <span class="fu">rnorm</span>(<span class="dv">91</span>, <span class="at">sd =</span> <span class="fl">0.6</span>), <span class="at">name =</span> <span class="st">"Sin"</span>)</span>
<span id="cb10-9"><a href="#cb10-9"></a>don <span class="ot">&lt;-</span> <span class="fu">do.call</span>(rbind, <span class="fu">list</span>(d1, d2, d3, d4))</span>
<span id="cb10-10"><a href="#cb10-10"></a></span>
<span id="cb10-11"><a href="#cb10-11"></a><span class="co"># Plot</span></span>
<span id="cb10-12"><a href="#cb10-12"></a><span class="fu">ggplot</span>(don, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y)) <span class="sc">+</span></span>
<span id="cb10-13"><a href="#cb10-13"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"#69b3a2"</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb10-14"><a href="#cb10-14"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span>  <span class="co"># Replacing hrbrthemes::theme_ipsum() with theme_minimal()</span></span>
<span id="cb10-15"><a href="#cb10-15"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>name, <span class="at">scales =</span> <span class="st">"free"</span>)  <span class="co"># 'scale' should be 'scales' in facet_wrap()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ds5_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="useful-for-2" class="level3">
<h3 class="anchored" data-anchor-id="useful-for-2">Useful for:</h3>
<ul>
<li>Detecting relationships between two variables</li>
<li>Identifying patterns or trends in data</li>
<li>Spotting outliers or unusual data points</li>
<li>Comparing different groups or categories within the data</li>
</ul>
</section>
<section id="variation-2" class="level3">
<h3 class="anchored" data-anchor-id="variation-2">Variation</h3>
<p>Scatterplots are sometimes supported by marginal distributions. It indeed adds insight to the graphic, revealing the distribution of both variables:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="co"># Libraries</span></span>
<span id="cb11-2"><a href="#cb11-2"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb11-3"><a href="#cb11-3"></a><span class="fu">library</span>(ggExtra)</span>
<span id="cb11-4"><a href="#cb11-4"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb11-5"><a href="#cb11-5"></a></span>
<span id="cb11-6"><a href="#cb11-6"></a><span class="co"># Load dataset from github using base R</span></span>
<span id="cb11-7"><a href="#cb11-7"></a>data <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">"https://raw.githubusercontent.com/holtzy/data_to_viz/master/Example_dataset/2_TwoNum.csv"</span>, </span>
<span id="cb11-8"><a href="#cb11-8"></a>                   <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">sep =</span> <span class="st">","</span>)[, <span class="fu">c</span>(<span class="st">"GrLivArea"</span>, <span class="st">"SalePrice"</span>)]</span>
<span id="cb11-9"><a href="#cb11-9"></a></span>
<span id="cb11-10"><a href="#cb11-10"></a><span class="co"># Create a ggplot2 scatterplot</span></span>
<span id="cb11-11"><a href="#cb11-11"></a>p <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb11-12"><a href="#cb11-12"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> GrLivArea, <span class="at">y =</span> SalePrice <span class="sc">/</span> <span class="dv">1000</span>)) <span class="sc">+</span></span>
<span id="cb11-13"><a href="#cb11-13"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"#69b3a2"</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb11-14"><a href="#cb11-14"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span>  <span class="co"># Replacing hrbrthemes::theme_ipsum() with theme_minimal()</span></span>
<span id="cb11-15"><a href="#cb11-15"></a>  <span class="fu">theme</span>(</span>
<span id="cb11-16"><a href="#cb11-16"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span></span>
<span id="cb11-17"><a href="#cb11-17"></a>  )</span>
<span id="cb11-18"><a href="#cb11-18"></a></span>
<span id="cb11-19"><a href="#cb11-19"></a><span class="co"># Add marginal histograms</span></span>
<span id="cb11-20"><a href="#cb11-20"></a><span class="fu">ggMarginal</span>(p, <span class="at">type =</span> <span class="st">"histogram"</span>, <span class="at">color =</span> <span class="st">"grey"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ds5_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="768"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="common-mistakes-2" class="level3">
<h3 class="anchored" data-anchor-id="common-mistakes-2">Common mistakes</h3>
<ul>
<li>Overplotting is the most common mistake when sample size is high. There are about 10 different workarounds to fix this issue.</li>
<li>Donâ€™t forget to show subgroups if you have some. Indeed it can reveal important hidden patterns in your data, like in the case of the Simpson paradox.</li>
</ul>
</section>
</section>
<section id="histogram-1" class="level2">
<h2 class="anchored" data-anchor-id="histogram-1">Histogram</h2>
<section id="definition-3" class="level3">
<h3 class="anchored" data-anchor-id="definition-3">Definition</h3>
<p>A barplot (or barchart) is one of the most common types of graphic. It shows the relationship between a numeric and a categoric variable. Each entity of the categoric variable is represented as a bar. The size of the bar represents its numeric value.</p>
<p>Here is an example showing the quantity of weapons exported by the top 20 largest exporters in 2017:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="co"># Libraries</span></span>
<span id="cb12-2"><a href="#cb12-2"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb12-3"><a href="#cb12-3"></a></span>
<span id="cb12-4"><a href="#cb12-4"></a><span class="co"># Load dataset from github using base R</span></span>
<span id="cb12-5"><a href="#cb12-5"></a>data <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">"https://raw.githubusercontent.com/holtzy/data_to_viz/master/Example_dataset/7_OneCatOneNum.csv"</span>, </span>
<span id="cb12-6"><a href="#cb12-6"></a>                   <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">sep =</span> <span class="st">","</span>)</span>
<span id="cb12-7"><a href="#cb12-7"></a></span>
<span id="cb12-8"><a href="#cb12-8"></a><span class="co"># Barplot</span></span>
<span id="cb12-9"><a href="#cb12-9"></a>data <span class="sc">%&gt;%</span></span>
<span id="cb12-10"><a href="#cb12-10"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Value)) <span class="sc">%&gt;%</span></span>
<span id="cb12-11"><a href="#cb12-11"></a>  <span class="fu">arrange</span>(Value) <span class="sc">%&gt;%</span></span>
<span id="cb12-12"><a href="#cb12-12"></a>  <span class="fu">tail</span>(<span class="dv">20</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-13"><a href="#cb12-13"></a>  <span class="fu">mutate</span>(<span class="at">Country =</span> <span class="fu">factor</span>(Country, Country)) <span class="sc">%&gt;%</span></span>
<span id="cb12-14"><a href="#cb12-14"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Country, <span class="at">y =</span> Value)) <span class="sc">+</span></span>
<span id="cb12-15"><a href="#cb12-15"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="st">"#69b3a2"</span>) <span class="sc">+</span></span>
<span id="cb12-16"><a href="#cb12-16"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb12-17"><a href="#cb12-17"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span>  <span class="co"># Replacing hrbrthemes::theme_ipsum() with theme_minimal()</span></span>
<span id="cb12-18"><a href="#cb12-18"></a>  <span class="fu">theme</span>(</span>
<span id="cb12-19"><a href="#cb12-19"></a>    <span class="at">panel.grid.minor.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb12-20"><a href="#cb12-20"></a>    <span class="at">panel.grid.major.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb12-21"><a href="#cb12-21"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span></span>
<span id="cb12-22"><a href="#cb12-22"></a>  ) <span class="sc">+</span></span>
<span id="cb12-23"><a href="#cb12-23"></a>  <span class="fu">xlab</span>(<span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb12-24"><a href="#cb12-24"></a>  <span class="fu">ylab</span>(<span class="st">"Weapon quantity (SIPRI trend-indicator value)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ds5_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="what-for-3" class="level3">
<h3 class="anchored" data-anchor-id="what-for-3">What for</h3>
<p>A barplot shows the relationship between a numeric and a categoric variable. In the previous graphic, each country is a level of the categoric variable, and the quantity of weapon sold is the numeric variable. An ordered barplot is a very good choice here since it displays both the ranking of countries and their specific value.</p>
<p>A barplot can also display values for several levels of grouping. Hereâ€™s an example of a grouped barplot:</p>
</section>
<section id="examples-3" class="level3">
<h3 class="anchored" data-anchor-id="examples-3">Examples</h3>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="co"># Libraries</span></span>
<span id="cb13-2"><a href="#cb13-2"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb13-3"><a href="#cb13-3"></a><span class="fu">library</span>(babynames)</span>
<span id="cb13-4"><a href="#cb13-4"></a></span>
<span id="cb13-5"><a href="#cb13-5"></a><span class="co"># Load dataset</span></span>
<span id="cb13-6"><a href="#cb13-6"></a>data <span class="ot">&lt;-</span> babynames <span class="sc">%&gt;%</span></span>
<span id="cb13-7"><a href="#cb13-7"></a>  <span class="fu">filter</span>(name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Ashley"</span>, <span class="st">"Amanda"</span>, <span class="st">"Jessica"</span>, <span class="st">"Patricia"</span>, <span class="st">"Linda"</span>, <span class="st">"Deborah"</span>, <span class="st">"Dorothy"</span>, <span class="st">"Betty"</span>, <span class="st">"Helen"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb13-8"><a href="#cb13-8"></a>  <span class="fu">filter</span>(sex <span class="sc">==</span> <span class="st">"F"</span>)</span>
<span id="cb13-9"><a href="#cb13-9"></a></span>
<span id="cb13-10"><a href="#cb13-10"></a><span class="co"># A grouped barplot</span></span>
<span id="cb13-11"><a href="#cb13-11"></a>data <span class="sc">%&gt;%</span></span>
<span id="cb13-12"><a href="#cb13-12"></a>  <span class="fu">filter</span>(name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Ashley"</span>, <span class="st">"Patricia"</span>, <span class="st">"Betty"</span>, <span class="st">"Helen"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb13-13"><a href="#cb13-13"></a>  <span class="fu">filter</span>(year <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1920</span>, <span class="dv">1960</span>, <span class="dv">2000</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb13-14"><a href="#cb13-14"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">as.factor</span>(year)) <span class="sc">%&gt;%</span></span>
<span id="cb13-15"><a href="#cb13-15"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> n, <span class="at">fill =</span> name)) <span class="sc">+</span></span>
<span id="cb13-16"><a href="#cb13-16"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span></span>
<span id="cb13-17"><a href="#cb13-17"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#69b3a2"</span>, <span class="st">"#404080"</span>, <span class="st">"#ffcc00"</span>, <span class="st">"#ff5733"</span>)) <span class="sc">+</span> <span class="co"># Custom colors instead of viridis</span></span>
<span id="cb13-18"><a href="#cb13-18"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span>  <span class="co"># Replacing hrbrthemes::theme_ipsum() with theme_minimal()</span></span>
<span id="cb13-19"><a href="#cb13-19"></a>  <span class="fu">ylab</span>(<span class="st">"Number of babies"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ds5_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="768"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="useful-for-3" class="level3">
<h3 class="anchored" data-anchor-id="useful-for-3">Useful for:</h3>
<ul>
<li>Comparing values across categories</li>
<li>Showing the distribution of a numeric variable for different groups</li>
<li>Displaying rankings or ordered data</li>
<li>Visualizing part-to-whole relationships (in stacked bar charts)</li>
</ul>
</section>
<section id="variation-3" class="level3">
<h3 class="anchored" data-anchor-id="variation-3">Variation</h3>
<p>Lollipop plot: A variation that replaces bars with segments and dots, resulting in a less cluttered figure:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a><span class="co"># Libraries</span></span>
<span id="cb14-2"><a href="#cb14-2"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb14-3"><a href="#cb14-3"></a></span>
<span id="cb14-4"><a href="#cb14-4"></a><span class="co"># Load dataset from github</span></span>
<span id="cb14-5"><a href="#cb14-5"></a>data <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">"https://raw.githubusercontent.com/holtzy/data_to_viz/master/Example_dataset/7_OneCatOneNum.csv"</span>, </span>
<span id="cb14-6"><a href="#cb14-6"></a>                   <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">sep =</span> <span class="st">","</span>)</span>
<span id="cb14-7"><a href="#cb14-7"></a></span>
<span id="cb14-8"><a href="#cb14-8"></a><span class="co"># Plot</span></span>
<span id="cb14-9"><a href="#cb14-9"></a>data <span class="sc">%&gt;%</span></span>
<span id="cb14-10"><a href="#cb14-10"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Value)) <span class="sc">%&gt;%</span></span>
<span id="cb14-11"><a href="#cb14-11"></a>  <span class="fu">arrange</span>(Value) <span class="sc">%&gt;%</span></span>
<span id="cb14-12"><a href="#cb14-12"></a>  <span class="fu">mutate</span>(<span class="at">Country =</span> <span class="fu">factor</span>(Country, Country)) <span class="sc">%&gt;%</span></span>
<span id="cb14-13"><a href="#cb14-13"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Country, <span class="at">y =</span> Value)) <span class="sc">+</span></span>
<span id="cb14-14"><a href="#cb14-14"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x =</span> Country, <span class="at">xend =</span> Country, <span class="at">y =</span> <span class="dv">0</span>, <span class="at">yend =</span> Value), <span class="at">color =</span> <span class="st">"grey"</span>) <span class="sc">+</span></span>
<span id="cb14-15"><a href="#cb14-15"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>, <span class="at">color =</span> <span class="st">"#69b3a2"</span>) <span class="sc">+</span></span>
<span id="cb14-16"><a href="#cb14-16"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb14-17"><a href="#cb14-17"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span>  <span class="co"># Replacing hrbrthemes::theme_ipsum() with theme_minimal()</span></span>
<span id="cb14-18"><a href="#cb14-18"></a>  <span class="fu">theme</span>(</span>
<span id="cb14-19"><a href="#cb14-19"></a>    <span class="at">panel.grid.minor.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb14-20"><a href="#cb14-20"></a>    <span class="at">panel.grid.major.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb14-21"><a href="#cb14-21"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span></span>
<span id="cb14-22"><a href="#cb14-22"></a>  ) <span class="sc">+</span></span>
<span id="cb14-23"><a href="#cb14-23"></a>  <span class="fu">xlab</span>(<span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ds5_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Circular barplot: Useful when you have many groups, though it sacrifices some accuracy in comparison:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="co"># Libraries</span></span>
<span id="cb15-2"><a href="#cb15-2"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb15-3"><a href="#cb15-3"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb15-4"><a href="#cb15-4"></a></span>
<span id="cb15-5"><a href="#cb15-5"></a><span class="co"># Load dataset from github</span></span>
<span id="cb15-6"><a href="#cb15-6"></a>data <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">"https://raw.githubusercontent.com/holtzy/data_to_viz/master/Example_dataset/7_OneCatOneNum.csv"</span>, <span class="at">header=</span><span class="cn">TRUE</span>, <span class="at">sep=</span><span class="st">","</span>)</span>
<span id="cb15-7"><a href="#cb15-7"></a></span>
<span id="cb15-8"><a href="#cb15-8"></a><span class="co"># Order data</span></span>
<span id="cb15-9"><a href="#cb15-9"></a>tmp <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb15-10"><a href="#cb15-10"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Value)) <span class="sc">%&gt;%</span></span>
<span id="cb15-11"><a href="#cb15-11"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Value)) <span class="sc">%&gt;%</span></span>
<span id="cb15-12"><a href="#cb15-12"></a>  <span class="fu">mutate</span>(<span class="at">Country =</span> <span class="fu">factor</span>(Country, Country))</span>
<span id="cb15-13"><a href="#cb15-13"></a></span>
<span id="cb15-14"><a href="#cb15-14"></a><span class="co"># Set a number of 'empty bars'</span></span>
<span id="cb15-15"><a href="#cb15-15"></a>empty_bar <span class="ot">=</span> <span class="dv">10</span></span>
<span id="cb15-16"><a href="#cb15-16"></a></span>
<span id="cb15-17"><a href="#cb15-17"></a><span class="co"># Add empty bars to the dataset</span></span>
<span id="cb15-18"><a href="#cb15-18"></a>to_add <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="cn">NA</span>, empty_bar, <span class="fu">ncol</span>(tmp))</span>
<span id="cb15-19"><a href="#cb15-19"></a><span class="fu">colnames</span>(to_add) <span class="ot">&lt;-</span> <span class="fu">colnames</span>(tmp)</span>
<span id="cb15-20"><a href="#cb15-20"></a>tmp <span class="ot">&lt;-</span> <span class="fu">rbind</span>(tmp, to_add)</span>
<span id="cb15-21"><a href="#cb15-21"></a>tmp<span class="sc">$</span>id <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">1</span>, <span class="fu">nrow</span>(tmp))</span>
<span id="cb15-22"><a href="#cb15-22"></a></span>
<span id="cb15-23"><a href="#cb15-23"></a><span class="co"># Get the name and the y position of each label</span></span>
<span id="cb15-24"><a href="#cb15-24"></a>label_tmp <span class="ot">&lt;-</span> tmp</span>
<span id="cb15-25"><a href="#cb15-25"></a>number_of_bar <span class="ot">&lt;-</span> <span class="fu">nrow</span>(label_tmp)</span>
<span id="cb15-26"><a href="#cb15-26"></a>angle <span class="ot">&lt;-</span> <span class="dv">90</span> <span class="sc">-</span> <span class="dv">360</span> <span class="sc">*</span> (label_tmp<span class="sc">$</span>id <span class="sc">-</span> <span class="fl">0.5</span>) <span class="sc">/</span> number_of_bar  <span class="co"># Adjust angles for label positioning</span></span>
<span id="cb15-27"><a href="#cb15-27"></a>label_tmp<span class="sc">$</span>hjust <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(angle <span class="sc">&lt;</span> <span class="sc">-</span><span class="dv">90</span>, <span class="dv">1</span>, <span class="dv">0</span>)</span>
<span id="cb15-28"><a href="#cb15-28"></a>label_tmp<span class="sc">$</span>angle <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(angle <span class="sc">&lt;</span> <span class="sc">-</span><span class="dv">90</span>, angle <span class="sc">+</span> <span class="dv">180</span>, angle)</span>
<span id="cb15-29"><a href="#cb15-29"></a>label_tmp<span class="sc">$</span>Country <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"United States"</span>, <span class="st">"US"</span>, label_tmp<span class="sc">$</span>Country)</span>
<span id="cb15-30"><a href="#cb15-30"></a>label_tmp<span class="sc">$</span>Country <span class="ot">&lt;-</span> <span class="fu">paste</span>(label_tmp<span class="sc">$</span>Country, <span class="st">" ("</span>, label_tmp<span class="sc">$</span>Value, <span class="st">")"</span>, <span class="at">sep =</span> <span class="st">""</span>)</span>
<span id="cb15-31"><a href="#cb15-31"></a></span>
<span id="cb15-32"><a href="#cb15-32"></a><span class="co"># Make the plot</span></span>
<span id="cb15-33"><a href="#cb15-33"></a><span class="fu">ggplot</span>(tmp, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">as.factor</span>(id), <span class="at">y =</span> Value)) <span class="sc">+</span>  <span class="co"># x is treated as a factor</span></span>
<span id="cb15-34"><a href="#cb15-34"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="fu">alpha</span>(<span class="st">"#69b3a2"</span>, <span class="fl">0.8</span>)) <span class="sc">+</span></span>
<span id="cb15-35"><a href="#cb15-35"></a>  <span class="fu">ylim</span>(<span class="sc">-</span><span class="dv">7000</span>, <span class="dv">13000</span>) <span class="sc">+</span></span>
<span id="cb15-36"><a href="#cb15-36"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb15-37"><a href="#cb15-37"></a>  <span class="fu">theme</span>(</span>
<span id="cb15-38"><a href="#cb15-38"></a>    <span class="at">axis.text =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb15-39"><a href="#cb15-39"></a>    <span class="at">axis.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb15-40"><a href="#cb15-40"></a>    <span class="at">panel.grid =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb15-41"><a href="#cb15-41"></a>    <span class="at">plot.margin =</span> <span class="fu">unit</span>(<span class="fu">rep</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">4</span>), <span class="st">"cm"</span>)</span>
<span id="cb15-42"><a href="#cb15-42"></a>  ) <span class="sc">+</span></span>
<span id="cb15-43"><a href="#cb15-43"></a>  <span class="fu">coord_polar</span>(<span class="at">start =</span> <span class="dv">0</span>) <span class="sc">+</span>  <span class="co"># Polar coordinates for a circular plot</span></span>
<span id="cb15-44"><a href="#cb15-44"></a>  <span class="fu">geom_text</span>(<span class="at">data =</span> label_tmp, <span class="fu">aes</span>(<span class="at">x =</span> id, <span class="at">y =</span> Value <span class="sc">+</span> <span class="dv">200</span>, <span class="at">label =</span> Country), </span>
<span id="cb15-45"><a href="#cb15-45"></a>            <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>, <span class="at">alpha =</span> <span class="fl">0.6</span>, <span class="at">size =</span> <span class="fl">2.5</span>, </span>
<span id="cb15-46"><a href="#cb15-46"></a>            <span class="at">angle =</span> label_tmp<span class="sc">$</span>angle, <span class="at">hjust =</span> label_tmp<span class="sc">$</span>hjust, <span class="at">inherit.aes =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb15-47"><a href="#cb15-47"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">24</span>, <span class="at">y =</span> <span class="dv">8000</span>, <span class="at">label =</span> <span class="st">"Who sells more weapons?"</span>), </span>
<span id="cb15-48"><a href="#cb15-48"></a>            <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">inherit.aes =</span> <span class="cn">FALSE</span>, <span class="at">data =</span> <span class="fu">data.frame</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ds5_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="768"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="common-mistakes-3" class="level3">
<h3 class="anchored" data-anchor-id="common-mistakes-3">Common mistakes</h3>
<ul>
<li>Do not confound barchart with histogram. A histogram has only a numeric variable as input and shows its distribution.</li>
<li>Order your bars. If the levels of your categoric variable have no obvious order, order the bars following their values.</li>
<li>Several values per group? Donâ€™t use a barplot. Even with error bars, it hides information and other types of graphics like boxplot or violin are much more appropriate.</li>
</ul>
</section>
</section>
<section id="line-chart" class="level2">
<h2 class="anchored" data-anchor-id="line-chart">Line Chart</h2>
<section id="definition-4" class="level3">
<h3 class="anchored" data-anchor-id="definition-4">Definition</h3>
<p>A line chart or line graph displays the evolution of one or several numeric variables. Data points are connected by straight line segments. It is similar to a scatter plot except that the measurement points are ordered (typically by their x-axis value) and joined with straight line segments. A line chart is often used to visualize a trend in data over intervals of time â€“ a time series â€“ thus the line is often drawn chronologically.</p>
<p>Here is an example showing the evolution of the bitcoin price between April 2013 and April 2018:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a><span class="co"># Libraries</span></span>
<span id="cb16-2"><a href="#cb16-2"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb16-3"><a href="#cb16-3"></a></span>
<span id="cb16-4"><a href="#cb16-4"></a><span class="co"># Load dataset from github</span></span>
<span id="cb16-5"><a href="#cb16-5"></a>data <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">"https://raw.githubusercontent.com/holtzy/data_to_viz/master/Example_dataset/3_TwoNumOrdered.csv"</span>, </span>
<span id="cb16-6"><a href="#cb16-6"></a>                   <span class="at">header =</span> <span class="cn">TRUE</span>)</span>
<span id="cb16-7"><a href="#cb16-7"></a>data<span class="sc">$</span>date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(data<span class="sc">$</span>date)</span>
<span id="cb16-8"><a href="#cb16-8"></a></span>
<span id="cb16-9"><a href="#cb16-9"></a><span class="co"># Plot</span></span>
<span id="cb16-10"><a href="#cb16-10"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> value)) <span class="sc">+</span></span>
<span id="cb16-11"><a href="#cb16-11"></a>  <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">"#69b3a2"</span>) <span class="sc">+</span></span>
<span id="cb16-12"><a href="#cb16-12"></a>  <span class="fu">ggtitle</span>(<span class="st">"Evolution of Bitcoin price"</span>) <span class="sc">+</span></span>
<span id="cb16-13"><a href="#cb16-13"></a>  <span class="fu">ylab</span>(<span class="st">"Bitcoin price ($)"</span>) <span class="sc">+</span></span>
<span id="cb16-14"><a href="#cb16-14"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span>  <span class="co"># Replacing hrbrthemes::theme_ipsum() with theme_minimal()</span></span>
<span id="cb16-15"><a href="#cb16-15"></a>  <span class="fu">theme</span>(</span>
<span id="cb16-16"><a href="#cb16-16"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>)</span>
<span id="cb16-17"><a href="#cb16-17"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ds5_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="what-for-4" class="level3">
<h3 class="anchored" data-anchor-id="what-for-4">What for</h3>
<p>Line charts can be used to show the evolution of one or several variables. Here is an example showing the evolution of three baby name frequencies in the US between 1880 and 2015:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a><span class="co"># Libraries</span></span>
<span id="cb17-2"><a href="#cb17-2"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb17-3"><a href="#cb17-3"></a><span class="fu">library</span>(babynames)</span>
<span id="cb17-4"><a href="#cb17-4"></a></span>
<span id="cb17-5"><a href="#cb17-5"></a><span class="co"># Load dataset from babynames</span></span>
<span id="cb17-6"><a href="#cb17-6"></a>don <span class="ot">&lt;-</span> babynames <span class="sc">%&gt;%</span></span>
<span id="cb17-7"><a href="#cb17-7"></a>  <span class="fu">filter</span>(name <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Ashley"</span>, <span class="st">"Patricia"</span>, <span class="st">"Helen"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb17-8"><a href="#cb17-8"></a>  <span class="fu">filter</span>(sex <span class="sc">==</span> <span class="st">"F"</span>)</span>
<span id="cb17-9"><a href="#cb17-9"></a></span>
<span id="cb17-10"><a href="#cb17-10"></a><span class="co"># Plot</span></span>
<span id="cb17-11"><a href="#cb17-11"></a><span class="fu">ggplot</span>(don, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> n, <span class="at">group =</span> name, <span class="at">color =</span> name)) <span class="sc">+</span></span>
<span id="cb17-12"><a href="#cb17-12"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb17-13"><a href="#cb17-13"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"#69b3a2"</span>, <span class="st">"#404080"</span>, <span class="st">"#ffcc00"</span>)) <span class="sc">+</span>  <span class="co"># Custom colors to replace viridis</span></span>
<span id="cb17-14"><a href="#cb17-14"></a>  <span class="fu">ggtitle</span>(<span class="st">"Popularity of American names in the previous 30 years"</span>) <span class="sc">+</span></span>
<span id="cb17-15"><a href="#cb17-15"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span>  <span class="co"># Replacing hrbrthemes::theme_ipsum() with theme_minimal()</span></span>
<span id="cb17-16"><a href="#cb17-16"></a>  <span class="fu">ylab</span>(<span class="st">"Number of babies born"</span>) <span class="sc">+</span></span>
<span id="cb17-17"><a href="#cb17-17"></a>  <span class="fu">theme</span>(</span>
<span id="cb17-18"><a href="#cb17-18"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>)</span>
<span id="cb17-19"><a href="#cb17-19"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ds5_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="useful-for-4" class="level3">
<h3 class="anchored" data-anchor-id="useful-for-4">Useful for:</h3>
<ul>
<li>Visualizing trends over time</li>
<li>Comparing multiple variables or categories over a continuous axis</li>
<li>Showing the rate of change between data points</li>
<li>Identifying patterns, cycles, or anomalies in data</li>
</ul>
</section>
<section id="variation-4" class="level3">
<h3 class="anchored" data-anchor-id="variation-4">Variation</h3>
<p>If the number of data points is low, it is advised to represent each individual observation with a dot:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a><span class="co"># Libraries</span></span>
<span id="cb18-2"><a href="#cb18-2"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb18-3"><a href="#cb18-3"></a></span>
<span id="cb18-4"><a href="#cb18-4"></a><span class="co"># Assuming `data` is already loaded and contains `date` and `value`</span></span>
<span id="cb18-5"><a href="#cb18-5"></a><span class="co"># Using tail to get the last 10 entries for the plot</span></span>
<span id="cb18-6"><a href="#cb18-6"></a>data <span class="sc">%&gt;%</span></span>
<span id="cb18-7"><a href="#cb18-7"></a>  <span class="fu">tail</span>(<span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb18-8"><a href="#cb18-8"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> value)) <span class="sc">+</span></span>
<span id="cb18-9"><a href="#cb18-9"></a>  <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">"#69b3a2"</span>) <span class="sc">+</span></span>
<span id="cb18-10"><a href="#cb18-10"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"#69b3a2"</span>, <span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb18-11"><a href="#cb18-11"></a>  <span class="fu">ggtitle</span>(<span class="st">"Line chart with points"</span>) <span class="sc">+</span></span>
<span id="cb18-12"><a href="#cb18-12"></a>  <span class="fu">ylab</span>(<span class="st">"Bitcoin price ($)"</span>) <span class="sc">+</span></span>
<span id="cb18-13"><a href="#cb18-13"></a>  <span class="fu">theme_minimal</span>()  <span class="co"># Replacing hrbrthemes::theme_ipsum() with theme_minimal()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ds5_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
<p>Lines are also used to show trends in a scatterplot. Here is an example using Smoothed conditional means and showing confidence interval around it:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a><span class="co"># Libraries</span></span>
<span id="cb19-2"><a href="#cb19-2"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb19-3"><a href="#cb19-3"></a></span>
<span id="cb19-4"><a href="#cb19-4"></a><span class="co"># Plot using the mpg dataset</span></span>
<span id="cb19-5"><a href="#cb19-5"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(displ, hwy)) <span class="sc">+</span></span>
<span id="cb19-6"><a href="#cb19-6"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb19-7"><a href="#cb19-7"></a>  <span class="fu">geom_smooth</span>(<span class="at">color =</span> <span class="st">"#69b3a2"</span>) <span class="sc">+</span></span>
<span id="cb19-8"><a href="#cb19-8"></a>  <span class="fu">theme_minimal</span>()  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ds5_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="common-caveats" class="level3">
<h3 class="anchored" data-anchor-id="common-caveats">Common caveats</h3>
<p>The line chart is subject to a lot of discussion concerning potential caveats:</p>
<ul>
<li>To cut or not to cut the Y axis? Whether or not the Y axis must start at 0 is a hot topic leading to intense debates. Generally, line plots do not need to start at 0 since it allows observing patterns more efficiently.</li>
</ul>
</section>
</section>
<section id="line-chart-1" class="level2">
<h2 class="anchored" data-anchor-id="line-chart-1">Line Chart</h2>
<section id="common-caveats-1" class="level3">
<h3 class="anchored" data-anchor-id="common-caveats-1">Common caveats</h3>
<p>The line chart is subject to a lot of discussion concerning potential caveats:</p>
<ul>
<li>To cut or not to cut the Y axis? Whether or not the Y axis must start at 0 is a hot topic leading to intense debates. Generally, line plots do not need to start at 0 since it allows observing patterns more efficiently.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a><span class="co"># Libraries</span></span>
<span id="cb20-2"><a href="#cb20-2"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb20-3"><a href="#cb20-3"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb20-4"><a href="#cb20-4"></a></span>
<span id="cb20-5"><a href="#cb20-5"></a><span class="co"># Create a small dataset with less dramatic changes</span></span>
<span id="cb20-6"><a href="#cb20-6"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb20-7"><a href="#cb20-7"></a>small_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb20-8"><a href="#cb20-8"></a>  <span class="at">date =</span> <span class="fu">seq</span>(<span class="fu">as.Date</span>(<span class="st">"2023-01-01"</span>), <span class="at">by =</span> <span class="st">"month"</span>, <span class="at">length.out =</span> <span class="dv">10</span>),</span>
<span id="cb20-9"><a href="#cb20-9"></a>  <span class="at">value =</span> <span class="dv">100</span> <span class="sc">+</span> <span class="fu">cumsum</span>(<span class="fu">rnorm</span>(<span class="dv">10</span>, <span class="at">mean =</span> <span class="fl">0.5</span>, <span class="at">sd =</span> <span class="dv">1</span>))</span>
<span id="cb20-10"><a href="#cb20-10"></a>)</span>
<span id="cb20-11"><a href="#cb20-11"></a></span>
<span id="cb20-12"><a href="#cb20-12"></a><span class="co"># Plot 1: Full context, no cutting</span></span>
<span id="cb20-13"><a href="#cb20-13"></a>p1 <span class="ot">&lt;-</span> small_data <span class="sc">%&gt;%</span></span>
<span id="cb20-14"><a href="#cb20-14"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> value)) <span class="sc">+</span></span>
<span id="cb20-15"><a href="#cb20-15"></a>  <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">"#69b3a2"</span>) <span class="sc">+</span></span>
<span id="cb20-16"><a href="#cb20-16"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"#69b3a2"</span>, <span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb20-17"><a href="#cb20-17"></a>  <span class="fu">ggtitle</span>(<span class="st">"Not cutting (shows full context)"</span>) <span class="sc">+</span></span>
<span id="cb20-18"><a href="#cb20-18"></a>  <span class="fu">ylab</span>(<span class="st">"Value"</span>) <span class="sc">+</span></span>
<span id="cb20-19"><a href="#cb20-19"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span>  <span class="co"># Replacing hrbrthemes::theme_ipsum() with theme_minimal()</span></span>
<span id="cb20-20"><a href="#cb20-20"></a>  <span class="fu">ylim</span>(<span class="dv">0</span>, <span class="fu">max</span>(small_data<span class="sc">$</span>value))</span>
<span id="cb20-21"><a href="#cb20-21"></a></span>
<span id="cb20-22"><a href="#cb20-22"></a><span class="co"># Plot 2: Cutting y-axis to exaggerate differences</span></span>
<span id="cb20-23"><a href="#cb20-23"></a>p2 <span class="ot">&lt;-</span> small_data <span class="sc">%&gt;%</span></span>
<span id="cb20-24"><a href="#cb20-24"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> value)) <span class="sc">+</span></span>
<span id="cb20-25"><a href="#cb20-25"></a>  <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">"#69b3a2"</span>) <span class="sc">+</span></span>
<span id="cb20-26"><a href="#cb20-26"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"#69b3a2"</span>, <span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb20-27"><a href="#cb20-27"></a>  <span class="fu">ggtitle</span>(<span class="st">"Cutting (exaggerates differences)"</span>) <span class="sc">+</span></span>
<span id="cb20-28"><a href="#cb20-28"></a>  <span class="fu">ylab</span>(<span class="st">"Value"</span>) <span class="sc">+</span></span>
<span id="cb20-29"><a href="#cb20-29"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span>  <span class="co"># Replacing hrbrthemes::theme_ipsum() with theme_minimal()</span></span>
<span id="cb20-30"><a href="#cb20-30"></a>  <span class="fu">ylim</span>(<span class="fu">min</span>(small_data<span class="sc">$</span>value) <span class="sc">-</span> <span class="dv">1</span>, <span class="fu">max</span>(small_data<span class="sc">$</span>value) <span class="sc">+</span> <span class="dv">1</span>)</span>
<span id="cb20-31"><a href="#cb20-31"></a></span>
<span id="cb20-32"><a href="#cb20-32"></a><span class="co"># Combine plots using patchwork</span></span>
<span id="cb20-33"><a href="#cb20-33"></a>p1 <span class="sc">+</span> p2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ds5_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>If you need to compare the evolution of 2 different variables, avoid using dual axis. Dual axis can show very different results depending on what range you apply to the axis.</li>
<li>Mind the spaghetti chart: too many lines make the chart unreadable.</li>
<li>Think about the aspect ratio of the graphic, extreme ratios make the chart unreadable.</li>
</ul>
</section>
</section>
<section id="word-cloud" class="level2">
<h2 class="anchored" data-anchor-id="word-cloud">Word Cloud</h2>
<section id="definition-5" class="level3">
<h3 class="anchored" data-anchor-id="definition-5">Definition</h3>
<p>A word cloud (also called tag cloud or weighted list) is a visual representation of text data. Words are usually single words, and the importance of each is shown with font size or color.</p>
<p>Here is an example showing the most frequent words used by Nekfeu, a famous French rapper, in a few of his songs:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a><span class="co"># Libraries</span></span>
<span id="cb21-2"><a href="#cb21-2"></a><span class="fu">library</span>(wordcloud)</span>
<span id="cb21-3"><a href="#cb21-3"></a></span>
<span id="cb21-4"><a href="#cb21-4"></a><span class="co"># Example data (random words with frequencies)</span></span>
<span id="cb21-5"><a href="#cb21-5"></a>words <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"data"</span>, <span class="st">"science"</span>, <span class="st">"AI"</span>, <span class="st">"Psychology"</span>, <span class="st">"learning"</span>, </span>
<span id="cb21-6"><a href="#cb21-6"></a>           <span class="st">"neural"</span>, <span class="st">"network"</span>, <span class="st">"SpenserReid"</span>, <span class="st">"model"</span>, <span class="st">"Hannibal"</span>, </span>
<span id="cb21-7"><a href="#cb21-7"></a>           <span class="st">"research"</span>, <span class="st">"statistics"</span>, <span class="st">"RStudio"</span>, <span class="st">"python"</span>, <span class="st">"visualization"</span>)</span>
<span id="cb21-8"><a href="#cb21-8"></a></span>
<span id="cb21-9"><a href="#cb21-9"></a>frequencies <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">8</span>, <span class="dv">15</span>, <span class="dv">6</span>, <span class="dv">12</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">9</span>, <span class="dv">11</span>, <span class="dv">8</span>, <span class="dv">10</span>, <span class="dv">9</span>, <span class="dv">6</span>, <span class="dv">12</span>, <span class="dv">7</span>)</span>
<span id="cb21-10"><a href="#cb21-10"></a></span>
<span id="cb21-11"><a href="#cb21-11"></a><span class="co"># Create a word cloud</span></span>
<span id="cb21-12"><a href="#cb21-12"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)  <span class="co"># For reproducibility</span></span>
<span id="cb21-13"><a href="#cb21-13"></a><span class="fu">wordcloud</span>(<span class="at">words =</span> words, <span class="at">freq =</span> frequencies, <span class="at">min.freq =</span> <span class="dv">1</span>,</span>
<span id="cb21-14"><a href="#cb21-14"></a>          <span class="at">scale =</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="fl">0.5</span>), <span class="at">colors =</span> <span class="fu">brewer.pal</span>(<span class="dv">8</span>, <span class="st">"Dark2"</span>),</span>
<span id="cb21-15"><a href="#cb21-15"></a>          <span class="at">random.order =</span> <span class="cn">FALSE</span>, <span class="at">rot.per =</span> <span class="fl">0.35</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ds5_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="576"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="what-for-5" class="level3">
<h3 class="anchored" data-anchor-id="what-for-5">What for</h3>
<p>Word clouds are useful for:</p>
<ul>
<li>Quickly perceiving the most prominent terms</li>
<li>Locating a term alphabetically to determine its relative prominence</li>
<li>Creating visually appealing representations of text data</li>
</ul>
<p>They are widely used in media and well understood by the public.</p>
</section>
<section id="useful-for-5" class="level3">
<h3 class="anchored" data-anchor-id="useful-for-5">Useful for:</h3>
<ul>
<li>Summarizing large amounts of text data</li>
<li>Highlighting key themes or topics in a dataset</li>
<li>Creating engaging visuals for presentations or reports</li>
<li>Comparing word frequencies across different texts or sources</li>
</ul>
</section>
<section id="example-2" class="level3">
<h3 class="anchored" data-anchor-id="example-2">Example</h3>
<p>Hereâ€™s an alternative representation using a lollipop plot, which addresses some of the limitations of word clouds:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a><span class="co"># Load necessary libraries</span></span>
<span id="cb22-2"><a href="#cb22-2"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb22-3"><a href="#cb22-3"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb22-4"><a href="#cb22-4"></a></span>
<span id="cb22-5"><a href="#cb22-5"></a><span class="co"># Example data (random words with frequencies)</span></span>
<span id="cb22-6"><a href="#cb22-6"></a>words <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"data"</span>, <span class="st">"science"</span>, <span class="st">"AI"</span>, <span class="st">"Psychology"</span>, <span class="st">"learning"</span>, </span>
<span id="cb22-7"><a href="#cb22-7"></a>           <span class="st">"neural"</span>, <span class="st">"network"</span>, <span class="st">"SpenserReid"</span>, <span class="st">"model"</span>, <span class="st">"Hannibal"</span>, </span>
<span id="cb22-8"><a href="#cb22-8"></a>           <span class="st">"research"</span>, <span class="st">"statistics"</span>, <span class="st">"RStudio"</span>, <span class="st">"python"</span>, <span class="st">"visualization"</span>)</span>
<span id="cb22-9"><a href="#cb22-9"></a></span>
<span id="cb22-10"><a href="#cb22-10"></a>frequencies <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">8</span>, <span class="dv">15</span>, <span class="dv">6</span>, <span class="dv">12</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">9</span>, <span class="dv">11</span>, <span class="dv">8</span>, <span class="dv">10</span>, <span class="dv">9</span>, <span class="dv">6</span>, <span class="dv">12</span>, <span class="dv">7</span>)</span>
<span id="cb22-11"><a href="#cb22-11"></a></span>
<span id="cb22-12"><a href="#cb22-12"></a><span class="co"># Create a data frame from the provided words and frequencies</span></span>
<span id="cb22-13"><a href="#cb22-13"></a>word_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">word =</span> words, <span class="at">freq =</span> frequencies)</span>
<span id="cb22-14"><a href="#cb22-14"></a></span>
<span id="cb22-15"><a href="#cb22-15"></a><span class="co"># Plot using ggplot2</span></span>
<span id="cb22-16"><a href="#cb22-16"></a>word_data <span class="sc">%&gt;%</span></span>
<span id="cb22-17"><a href="#cb22-17"></a>  <span class="fu">mutate</span>(<span class="at">word =</span> <span class="fu">factor</span>(word, word)) <span class="sc">%&gt;%</span></span>
<span id="cb22-18"><a href="#cb22-18"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> word, <span class="at">y =</span> freq)) <span class="sc">+</span></span>
<span id="cb22-19"><a href="#cb22-19"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x =</span> word, <span class="at">xend =</span> word, <span class="at">y =</span> <span class="dv">0</span>, <span class="at">yend =</span> freq), <span class="at">color =</span> <span class="st">"grey"</span>) <span class="sc">+</span></span>
<span id="cb22-20"><a href="#cb22-20"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>, <span class="at">color =</span> <span class="st">"#69b3a2"</span>) <span class="sc">+</span></span>
<span id="cb22-21"><a href="#cb22-21"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb22-22"><a href="#cb22-22"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span>  <span class="co"># Replacing hrbrthemes::theme_ipsum() with theme_minimal()</span></span>
<span id="cb22-23"><a href="#cb22-23"></a>  <span class="fu">theme</span>(</span>
<span id="cb22-24"><a href="#cb22-24"></a>    <span class="at">panel.grid.minor.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb22-25"><a href="#cb22-25"></a>    <span class="at">panel.grid.major.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb22-26"><a href="#cb22-26"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span></span>
<span id="cb22-27"><a href="#cb22-27"></a>  ) <span class="sc">+</span></span>
<span id="cb22-28"><a href="#cb22-28"></a>  <span class="fu">xlab</span>(<span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb22-29"><a href="#cb22-29"></a>  <span class="fu">ylab</span>(<span class="st">"Frequency"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="ds5_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="variation-5" class="level3">
<h3 class="anchored" data-anchor-id="variation-5">Variation</h3>
<p>Many variations exist for word clouds:</p>
<ul>
<li>Different shapes, sometimes using the shape of an object related to the topic</li>
<li>Varying text orientation, font, size, and colors</li>
<li>Interactive word clouds that change or provide additional information on hover</li>
</ul>
</section>
<section id="common-mistakes-4" class="level3">
<h3 class="anchored" data-anchor-id="common-mistakes-4">Common mistakes</h3>
<ul>
<li>Relying too heavily on word clouds for accurate data representation</li>
<li>Ignoring the limitations of area as a metaphor for numeric values</li>
<li>Not accounting for the bias created by longer words appearing larger</li>
<li>Using word clouds when more precise visualizations (like bar charts or lollipop plots) would be more appropriate</li>
<li>Creating overly complex or cluttered word clouds that are difficult to read or interpret</li>
</ul>
<p>Word clouds, while visually appealing, are often criticized for their lack of accuracy in conveying information. Consider using them primarily for aesthetic purposes or in conjunction with more precise data visualization methods.</p>
</section>
</section>
<section id="psychology-data-from-year-1" class="level2">
<h2 class="anchored" data-anchor-id="psychology-data-from-year-1">Psychology Data from Year 1</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a><span class="co"># Load necessary libraries</span></span>
<span id="cb23-2"><a href="#cb23-2"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb23-3"><a href="#cb23-3"></a></span>
<span id="cb23-4"><a href="#cb23-4"></a><span class="co"># Load the dataset</span></span>
<span id="cb23-5"><a href="#cb23-5"></a>data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"materials/data/Y1W3_data.csv"</span>)</span>
<span id="cb23-6"><a href="#cb23-6"></a></span>
<span id="cb23-7"><a href="#cb23-7"></a><span class="co"># Remove all NA values</span></span>
<span id="cb23-8"><a href="#cb23-8"></a>data <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(data)</span>
<span id="cb23-9"><a href="#cb23-9"></a></span>
<span id="cb23-10"><a href="#cb23-10"></a><span class="co"># Create a bar chart for the 'DogCatBoth' variable</span></span>
<span id="cb23-11"><a href="#cb23-11"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x =</span> DogCatBoth)) <span class="sc">+</span></span>
<span id="cb23-12"><a href="#cb23-12"></a>  <span class="fu">geom_bar</span>(<span class="at">fill =</span> <span class="st">"steelblue"</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb23-13"><a href="#cb23-13"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb23-14"><a href="#cb23-14"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Distribution of DogCatBoth Responses"</span>,</span>
<span id="cb23-15"><a href="#cb23-15"></a>       <span class="at">x =</span> <span class="st">"Dog, Cat, or Both"</span>,</span>
<span id="cb23-16"><a href="#cb23-16"></a>       <span class="at">y =</span> <span class="st">"Count"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ds5_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a><span class="co"># Create a bar chart for the 'InsectApocalypse' variable</span></span>
<span id="cb24-2"><a href="#cb24-2"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x =</span> InsectApocalypse)) <span class="sc">+</span></span>
<span id="cb24-3"><a href="#cb24-3"></a>  <span class="fu">geom_bar</span>(<span class="at">fill =</span> <span class="st">"darkgreen"</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb24-4"><a href="#cb24-4"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb24-5"><a href="#cb24-5"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Distribution of Insect Apocalypse Responses"</span>,</span>
<span id="cb24-6"><a href="#cb24-6"></a>       <span class="at">x =</span> <span class="st">"Insect Apocalypse Belief"</span>,</span>
<span id="cb24-7"><a href="#cb24-7"></a>       <span class="at">y =</span> <span class="st">"Count"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ds5_files/figure-html/unnamed-chunk-23-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a><span class="co"># Create a bar chart for the 'LarkorOwl' variable</span></span>
<span id="cb25-2"><a href="#cb25-2"></a><span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x =</span> LarkorOwl)) <span class="sc">+</span></span>
<span id="cb25-3"><a href="#cb25-3"></a>  <span class="fu">geom_bar</span>(<span class="at">fill =</span> <span class="st">"purple"</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb25-4"><a href="#cb25-4"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb25-5"><a href="#cb25-5"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">labels =</span> <span class="cf">function</span>(x) <span class="fu">substr</span>(x, <span class="dv">1</span>, <span class="dv">4</span>)) <span class="sc">+</span></span>
<span id="cb25-6"><a href="#cb25-6"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Distribution of Lark or Owl Responses"</span>,</span>
<span id="cb25-7"><a href="#cb25-7"></a>       <span class="at">x =</span> <span class="st">""</span>,</span>
<span id="cb25-8"><a href="#cb25-8"></a>       <span class="at">y =</span> <span class="st">"Count"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ds5_files/figure-html/unnamed-chunk-23-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a><span class="co"># Count for each column</span></span>
<span id="cb26-2"><a href="#cb26-2"></a><span class="fu">cat</span>(<span class="st">"Count for DogCatBoth: "</span>, <span class="fu">sum</span>(<span class="sc">!</span><span class="fu">is.na</span>(data<span class="sc">$</span>DogCatBoth)), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Count for DogCatBoth:  39 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a><span class="fu">cat</span>(<span class="st">"Count for InsectApocalypse: "</span>, <span class="fu">sum</span>(<span class="sc">!</span><span class="fu">is.na</span>(data<span class="sc">$</span>InsectApocalypse)), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Count for InsectApocalypse:  39 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1"></a><span class="fu">cat</span>(<span class="st">"Count for LarkorOwl: "</span>, <span class="fu">sum</span>(<span class="sc">!</span><span class="fu">is.na</span>(data<span class="sc">$</span>LarkorOwl)), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Count for LarkorOwl:  39 </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1"></a><span class="co"># Load required libraries</span></span>
<span id="cb32-2"><a href="#cb32-2"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb32-3"><a href="#cb32-3"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb32-4"><a href="#cb32-4"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb32-5"><a href="#cb32-5"></a><span class="fu">library</span>(scales)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'scales'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:purrr':

    discard</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:readr':

    col_factor</code></pre>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1"></a><span class="co"># Read the data</span></span>
<span id="cb36-2"><a href="#cb36-2"></a>data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"materials/data/Y1W3_data.csv"</span>)</span>
<span id="cb36-3"><a href="#cb36-3"></a></span>
<span id="cb36-4"><a href="#cb36-4"></a><span class="co"># Select relevant columns and remove rows with NA</span></span>
<span id="cb36-5"><a href="#cb36-5"></a>tipi_data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb36-6"><a href="#cb36-6"></a>  <span class="fu">select</span>(LarkorOwl, E_TIPI, A_TIPI, C_TIPI, ES_TIPI, O_TIPI) <span class="sc">%&gt;%</span></span>
<span id="cb36-7"><a href="#cb36-7"></a>  <span class="fu">na.omit</span>()</span>
<span id="cb36-8"><a href="#cb36-8"></a></span>
<span id="cb36-9"><a href="#cb36-9"></a><span class="co"># Shorten labels to Lark and Owl</span></span>
<span id="cb36-10"><a href="#cb36-10"></a>tipi_data<span class="sc">$</span>LarkorOwl <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="fu">grepl</span>(<span class="st">"Lark"</span>, tipi_data<span class="sc">$</span>LarkorOwl), <span class="st">"Lark"</span>, <span class="st">"Owl"</span>)</span>
<span id="cb36-11"><a href="#cb36-11"></a></span>
<span id="cb36-12"><a href="#cb36-12"></a><span class="co"># Reshape the data for radar plot</span></span>
<span id="cb36-13"><a href="#cb36-13"></a>radar_data <span class="ot">&lt;-</span> tipi_data <span class="sc">%&gt;%</span></span>
<span id="cb36-14"><a href="#cb36-14"></a>  <span class="fu">gather</span>(<span class="at">key =</span> <span class="st">"Trait"</span>, <span class="at">value =</span> <span class="st">"Score"</span>, <span class="sc">-</span>LarkorOwl) <span class="sc">%&gt;%</span></span>
<span id="cb36-15"><a href="#cb36-15"></a>  <span class="fu">mutate</span>(<span class="at">Trait =</span> <span class="fu">factor</span>(Trait, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"E_TIPI"</span>, <span class="st">"A_TIPI"</span>, <span class="st">"C_TIPI"</span>, <span class="st">"ES_TIPI"</span>, <span class="st">"O_TIPI"</span>)))</span>
<span id="cb36-16"><a href="#cb36-16"></a></span>
<span id="cb36-17"><a href="#cb36-17"></a><span class="co"># Calculate mean scores for each trait by Lark/Owl preference</span></span>
<span id="cb36-18"><a href="#cb36-18"></a>mean_scores <span class="ot">&lt;-</span> radar_data <span class="sc">%&gt;%</span></span>
<span id="cb36-19"><a href="#cb36-19"></a>  <span class="fu">group_by</span>(LarkorOwl, Trait) <span class="sc">%&gt;%</span></span>
<span id="cb36-20"><a href="#cb36-20"></a>  <span class="fu">summarize</span>(<span class="at">Mean_Score =</span> <span class="fu">mean</span>(Score)) <span class="sc">%&gt;%</span></span>
<span id="cb36-21"><a href="#cb36-21"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'LarkorOwl'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1"></a><span class="co"># Create a function to generate coordinates for the radar chart</span></span>
<span id="cb38-2"><a href="#cb38-2"></a>coord_radar <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">theta =</span> <span class="st">"x"</span>, <span class="at">start =</span> <span class="dv">0</span>, <span class="at">direction =</span> <span class="dv">1</span>) {</span>
<span id="cb38-3"><a href="#cb38-3"></a>  theta <span class="ot">&lt;-</span> <span class="fu">match.arg</span>(theta, <span class="fu">c</span>(<span class="st">"x"</span>, <span class="st">"y"</span>))</span>
<span id="cb38-4"><a href="#cb38-4"></a>  r <span class="ot">&lt;-</span> <span class="cf">if</span> (theta <span class="sc">==</span> <span class="st">"x"</span>) <span class="st">"y"</span> <span class="cf">else</span> <span class="st">"x"</span></span>
<span id="cb38-5"><a href="#cb38-5"></a>  <span class="fu">ggproto</span>(<span class="st">"CordRadar"</span>, CoordPolar, <span class="at">theta =</span> theta, <span class="at">r =</span> r,</span>
<span id="cb38-6"><a href="#cb38-6"></a>          <span class="at">start =</span> start, <span class="at">direction =</span> <span class="fu">sign</span>(direction),</span>
<span id="cb38-7"><a href="#cb38-7"></a>          <span class="at">is_linear =</span> <span class="cf">function</span>(coord) <span class="cn">TRUE</span>)</span>
<span id="cb38-8"><a href="#cb38-8"></a>}</span>
<span id="cb38-9"><a href="#cb38-9"></a></span>
<span id="cb38-10"><a href="#cb38-10"></a><span class="co"># Create the radar plot</span></span>
<span id="cb38-11"><a href="#cb38-11"></a>radar_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mean_scores, <span class="fu">aes</span>(<span class="at">x =</span> Trait, <span class="at">y =</span> Mean_Score, <span class="at">group =</span> LarkorOwl, <span class="at">color =</span> LarkorOwl)) <span class="sc">+</span></span>
<span id="cb38-12"><a href="#cb38-12"></a>  <span class="fu">geom_polygon</span>(<span class="fu">aes</span>(<span class="at">fill =</span> LarkorOwl), <span class="at">alpha =</span> <span class="fl">0.25</span>) <span class="sc">+</span></span>
<span id="cb38-13"><a href="#cb38-13"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb38-14"><a href="#cb38-14"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb38-15"><a href="#cb38-15"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>), <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb38-16"><a href="#cb38-16"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"Lark"</span> <span class="ot">=</span> <span class="st">"#FF6B6B"</span>, <span class="st">"Owl"</span> <span class="ot">=</span> <span class="st">"#4ECDC4"</span>)) <span class="sc">+</span></span>
<span id="cb38-17"><a href="#cb38-17"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"Lark"</span> <span class="ot">=</span> <span class="st">"#FF6B6B"</span>, <span class="st">"Owl"</span> <span class="ot">=</span> <span class="st">"#4ECDC4"</span>)) <span class="sc">+</span></span>
<span id="cb38-18"><a href="#cb38-18"></a>  <span class="fu">coord_radar</span>() <span class="sc">+</span></span>
<span id="cb38-19"><a href="#cb38-19"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> LarkorOwl, <span class="at">ncol =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb38-20"><a href="#cb38-20"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb38-21"><a href="#cb38-21"></a>  <span class="fu">theme</span>(</span>
<span id="cb38-22"><a href="#cb38-22"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>),</span>
<span id="cb38-23"><a href="#cb38-23"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb38-24"><a href="#cb38-24"></a>    <span class="at">axis.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb38-25"><a href="#cb38-25"></a>    <span class="at">panel.grid.major =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"gray"</span>, <span class="at">size =</span> <span class="fl">0.3</span>),</span>
<span id="cb38-26"><a href="#cb38-26"></a>    <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb38-27"><a href="#cb38-27"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span></span>
<span id="cb38-28"><a href="#cb38-28"></a>  ) <span class="sc">+</span></span>
<span id="cb38-29"><a href="#cb38-29"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"TIPI Trait Scores by Lark/Owl Preference"</span>,</span>
<span id="cb38-30"><a href="#cb38-30"></a>       <span class="at">subtitle =</span> <span class="st">"E: Extraversion, A: Agreeableness, C: Conscientiousness, ES: Emotional Stability, O: Openness"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.
â„¹ Please use `linewidth` instead.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The `size` argument of `element_line()` is deprecated as of ggplot2 3.4.0.
â„¹ Please use the `linewidth` argument instead.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1"></a><span class="co"># Display the plot</span></span>
<span id="cb41-2"><a href="#cb41-2"></a><span class="fu">print</span>(radar_plot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ds5_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1"></a><span class="co"># Save the plot as a PNG file</span></span>
<span id="cb42-2"><a href="#cb42-2"></a><span class="fu">ggsave</span>(<span class="st">"tipi_radar_plots.png"</span>, radar_plot, <span class="at">width =</span> <span class="dv">12</span>, <span class="at">height =</span> <span class="dv">6</span>, <span class="at">dpi =</span> <span class="dv">300</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>



</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
          // default icon
          link.classList.add("external");
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>Copyright 2024, Gordon Wright</p>
</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>