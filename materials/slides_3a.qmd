---
title: "Intro to Data Visualisation II"
author: "Lecture 3 -- More than Graphs"
engine: knitr

format: 
  revealjs: 
    slide-number: c/t
    controls-layout: bottom-right
    embed-resources: true
    scrollable: true
    code-overflow: wrap
    code-line-numbers: true
    code-copy: true
    theme: [simple, slides.scss]
    reference-location: document
    footer: "[Data Visualisation II](https:www.bbc.co.uk)"
webr:
  packages: ['ggplot2', 'dplyr'] # Install R packages on document open
# autoload-packages: false       # Disable automatic loading of packages
# show-startup-message: false    # Disable displaying status of webR initialization
filters:
- webr
---

## Introduction

> "Far better an approximate answer to the right question, which is often vague, than an exact answer to the wrong question, which can always be made precise." ---John W. Tukey

-   Descriptive statistics are tools for describing data
-   There are many ways to describe data
-   Choose the most useful way for your data
-   Describing data is necessary because there's usually too much of it

------------------------------------------------------------------------

## Too Many Numbers

-   Example: Asking thousands of people about their happiness
-   Raw data is overwhelming and difficult to interpret

```{r}
#| echo: false
happiness <- rnorm(500, 100, 500)
knitr::kable(matrix(round(happiness), ncol=10, nrow=5))
```

------------------------------------------------------------------------

[From Data to Viz website](https://www.data-to-viz.com/)

[Quarto Publishing System](https://quarto.org/)

## What do you currently use?

**How do you write your essays or lab reports?**

* Microsoft Word?

* Google Docs?

* Markdown?

::: {.fragment}

**How do you currently play with numbers?**

* Excel?

* SPSS?

* R?

* Python?

:::


## What is Quarto?

Quarto is an open-source scientific and technical publishing system [that allows you to combine text, images, code, plots, and tables in a fully-reproducible document.]{.fragment}

<br>

[Quarto has support for multiple languages including R, Python, Julia, and Observable.]{.fragment}

<br>

[It also works for a range of output formats such as PDFs, HTML documents, websites, presentations,...]{.fragment}

## Why use Quarto? Why use R?

* More journals require code to be submitted (for transparency and reproducibility). Keeping the code with the paper makes this easier.

* Copying and pasting is tedious (and a great source of accidental errors).

* If you fix an error in code or data, the results and figures in the paper update automatically.

* Easy to share publicly. 

* Open source so anyone can use it.

## What about R Markdown?

R Markdown isn't going anywhere but...

* Quarto has better multi-language support

* More user-friendly

* Better control of the output layouts

# Your first Quarto document {background-color="#D9DBDB"}

## Creating a document

<p style="text-align:center;">
<img src="images/new_doc.gif" alt="Gif of creating a new quarto document" width="50%">
</p>

## Quarto in RStudio

::: columns

::: {.column}

**Source editor**

![](images/source.png){fig-align="center" width="70%"}

:::

::: {.column}

**Visual editor**

![](images/visual.png){fig-align="center" width="70%"}

:::

:::

## Rendering a document

Within RStudio IDE: click **Render** (or Ctrl+Shift+K)

. . . 

<br>

Using {quarto}

```{r}
#| eval: false
#| echo: true
library(quarto)
quarto_render("document.qmd")
```

. . .

<br>

Using the command line

``` bash
quarto render document.qmd
```

## What makes a Quarto document?

YAML header

``` yaml
---
title: "A very cool title"
format: html
---
```

. . . 

Content

* Text, links, images

* Code, tables, plots

* Equations, references


## Output types

::: {.incremental}

* Documents: HTML, PDF, MS Word, Markdown

* Presentations: Revealjs, PowerPoint, Beamer

* Websites

* Books

* ...

:::

## Looking at Data: Graphs

### Scatter Plot

```{r}
#| echo: false
plot(happiness)
```

------------------------------------------------------------------------

## Looking at Data: Histograms

```{r}
#| echo: false
hist(happiness)
```

-   Shows the distribution of data
-   Reveals shape, center, and spread

------------------------------------------------------------------------

## Important Ideas

1.  Distribution
2.  Central Tendency
3.  Variance

------------------------------------------------------------------------

## Measures of Central Tendency

1.  Mode
2.  Median
3.  Mean

------------------------------------------------------------------------

## Mode

-   Most frequently occurring number
-   Example: 1, 1, 1, 2, 3, 4, 5, 6
-   Mode = 1

------------------------------------------------------------------------

## Median

-   Middle value when data is ordered
-   Example: 1, 3, 4, **5**, 6, 7, 9
-   Median = 5

------------------------------------------------------------------------

## Mean

$Mean = \bar{X} = \frac{\sum_{i=1}^{n} x_{i}}{N}$

-   Sum of all values divided by the number of values
-   Represents the "average"

------------------------------------------------------------------------

## Measures of Variation

1.  Range
2.  Variance
3.  Standard Deviation

------------------------------------------------------------------------

## Range

-   Minimum and maximum values
-   Example: 1, 3, 4, 5, 5, 6, 7, 8, 9, 24
-   Range: 1 to 24

------------------------------------------------------------------------

## Variance

$variance = \frac{\text{Sum of squared difference scores}}{\text{Number of Scores}}$

-   Measures spread of data around the mean

------------------------------------------------------------------------

## Standard Deviation

$\text{standard deviation} = \sqrt{\frac{\sum_{i}^{n}({x_{i}-\bar{x})^2}}{N}}$

-   Square root of variance
-   In same units as original data

------------------------------------------------------------------------

## Using Descriptive Statistics

-   Reduce large datasets to summary statistics
-   Combine with graphical representations
-   Be aware of limitations (e.g., Anscombe's Quartet)

------------------------------------------------------------------------

## Anscombe's Quartet

```{r}
#| echo: false
library(ggplot2)
library(data.table)

ac <- fread("data/anscombe.txt")
ac <- as.data.frame(ac)

ac_long <- data.frame(
  x = c(ac[,1], ac[,3], ac[,5], ac[,7]),
  y = c(ac[,2], ac[,4], ac[,6], ac[,8]),
  quartet = as.factor(rep(1:4, each=11))
)

ggplot(ac_long, aes(x=x, y=y, color=quartet)) +
  geom_point() +
  theme_classic() +
  facet_wrap(~quartet)
```

-   Same descriptive statistics, different patterns

------------------------------------------------------------------------

## Remember

-   Always look at your data
-   Combine descriptive statistics with visualizations
-   Be aware of potential hidden patterns